<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>菜鸟童靴</title>
  
  <subtitle>个人技术博客</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2022-03-06T14:01:51.060Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>MrYang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>github访问慢，一直不成功，难道非得科学上网吗</title>
    <link href="http://yoursite.com/2022/03/06/github%E8%AE%BF%E9%97%AE%E6%85%A2%EF%BC%8C%E4%B8%80%E7%9B%B4%E4%B8%8D%E6%88%90%E5%8A%9F%EF%BC%8C%E9%9A%BE%E9%81%93%E9%9D%9E%E5%BE%97%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E5%90%97/"/>
    <id>http://yoursite.com/2022/03/06/github%E8%AE%BF%E9%97%AE%E6%85%A2%EF%BC%8C%E4%B8%80%E7%9B%B4%E4%B8%8D%E6%88%90%E5%8A%9F%EF%BC%8C%E9%9A%BE%E9%81%93%E9%9D%9E%E5%BE%97%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E5%90%97/</id>
    <published>2022-03-06T12:56:22.000Z</published>
    <updated>2022-03-06T14:01:51.060Z</updated>
    
    <content type="html"><![CDATA[<p>github访问慢，一直不成功，难道非得科学上网吗，今天小编给你带来终极解决方案，让你不再为此而烦恼</p><a id="more"></a><h3 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h3><p>​        github上有很多优秀的资源和项目，对程序员开发成长的有效平台之一，但是国内访问github的并不是那么友好</p><p>经常会出现访问一直转圈圈，访问慢，或者超时失败，小编在今天之前一直都是科学上网的方式，解决现状，今天服务</p><p>费软件到期后，忽然访问不了，又不想续费了，所以找了找网上有没有可行性的解决方案，一搜不知道，还真有，</p><p>接下来小编给大家案例两种方式的访问，方式一：dev-sidecar、方式二GitHub520 </p><h3 id="1、dev-sidecar"><a href="#1、dev-sidecar" class="headerlink" title="1、dev-sidecar"></a>1、dev-sidecar</h3><p>开发者边车，命名取自service-mesh的service-sidecar，意为为开发者打辅助的边车工具<br>通过本地代理的方式将https请求代理到一些国内的加速通道上</p><h4 id="1-1开源网址："><a href="#1-1开源网址：" class="headerlink" title="1.1开源网址："></a>1.1开源网址：</h4><p><a href="https://gitee.com/docmirror/dev-sidecar" target="_blank" rel="noopener">https://gitee.com/docmirror/dev-sidecar</a></p><h4 id="1-2特性："><a href="#1-2特性：" class="headerlink" title="1.2特性："></a>1.2特性：</h4><p>1、 dns优选</p><p>2、 请求拦截</p><p>3、 github加速</p><p>4、 Stack Overflow 加速</p><p>5、 npm加速</p><h4 id="1-3安装使用"><a href="#1-3安装使用" class="headerlink" title="1.3安装使用"></a>1.3安装使用</h4><h5 id="1-3-1选择平台下载"><a href="#1-3-1选择平台下载" class="headerlink" title="1.3.1选择平台下载"></a>1.3.1选择平台下载</h5><p><img src="/2022/03/06/github%E8%AE%BF%E9%97%AE%E6%85%A2%EF%BC%8C%E4%B8%80%E7%9B%B4%E4%B8%8D%E6%88%90%E5%8A%9F%EF%BC%8C%E9%9A%BE%E9%81%93%E9%9D%9E%E5%BE%97%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E5%90%97/1646572766(1).jpg" style="zoom: 50%;"></p><p>​    </p><p>此项目支持平台有很多，这边以window为例，我直接下载安装，傻瓜式安装，</p><h5 id="1-3-2-安装根证书"><a href="#1-3-2-安装根证书" class="headerlink" title="1.3.2 安装根证书"></a>1.3.2 安装根证书</h5><p>第一次打开会提示安装证书，根据提示操作即可</p><p>更多有关根证书的说明，请参考 <a href="https://gitee.com/docmirror/dev-sidecar/blob/master/doc/caroot.md" target="_blank" rel="noopener">为什么要安装根证书?</a></p><blockquote><p>根证书是本地随机生成的，所以不用担心根证书的安全问题（本应用不收集任何用户信息）<br>你也可以在加速服务设置中自定义根证书（PEM格式的证书与私钥）</p><p>火狐浏览器需要<a href="https://gitee.com/docmirror/dev-sidecar#3浏览器打开提示证书不受信任" target="_blank" rel="noopener">手动安装证书</a></p></blockquote><h5 id="1-3-4开始加速吧"><a href="#1-3-4开始加速吧" class="headerlink" title="1.3.4开始加速吧"></a>1.3.4开始加速吧</h5><p><img src="/2022/03/06/github%E8%AE%BF%E9%97%AE%E6%85%A2%EF%BC%8C%E4%B8%80%E7%9B%B4%E4%B8%8D%E6%88%90%E5%8A%9F%EF%BC%8C%E9%9A%BE%E9%81%93%E9%9D%9E%E5%BE%97%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E5%90%97/1646572959(1).jpg" style="zoom: 50%;"></p><p>去试试打开github</p><h3 id="2、-GitHub520"><a href="#2、-GitHub520" class="headerlink" title="2、 GitHub520"></a>2、 GitHub520</h3><h4 id="2-1开源网址："><a href="#2-1开源网址：" class="headerlink" title="2.1开源网址："></a>2.1开源网址：</h4><p><a href="https://gitee.com/doshengl/GitHub520" target="_blank" rel="noopener">https://gitee.com/doshengl/GitHub520</a></p><h4 id="2-2安装使用"><a href="#2-2安装使用" class="headerlink" title="2.2安装使用"></a>2.2安装使用</h4><h5 id="2-2-1-手动方式（每次得手动更新不推荐）"><a href="#2-2-1-手动方式（每次得手动更新不推荐）" class="headerlink" title="2.2.1 手动方式（每次得手动更新不推荐）"></a>2.2.1 手动方式（每次得手动更新不推荐）</h5><h5 id="2-2-1-1-修改-hosts-文件"><a href="#2-2-1-1-修改-hosts-文件" class="headerlink" title="2.2.1.1 修改 hosts 文件"></a>2.2.1.1 修改 hosts 文件</h5><p>hosts 文件在每个系统的位置不一，详情如下：</p><ul><li>Windows 系统：<code>C:\Windows\System32\drivers\etc\hosts</code></li><li>Linux 系统：<code>/etc/hosts</code></li><li>Mac（苹果电脑）系统：<code>/etc/hosts</code></li><li>Android（安卓）系统：<code>/system/etc/hosts</code></li><li>iPhone（iOS）系统：<code>/etc/hosts</code></li></ul><p>修改方法，把第一步的内容复制到文本末尾：</p><ol><li>Windows 使用记事本。</li><li>Linux、Mac 使用 Root 权限：<code>sudo vi /etc/hosts</code>。</li><li>iPhone、iPad 须越狱、Android 必须要 root。</li></ol><h6 id="2-2-1-2-激活生效"><a href="#2-2-1-2-激活生效" class="headerlink" title="2.2.1.2 激活生效"></a>2.2.1.2 激活生效</h6><p>大部分情况下是直接生效，如未生效可尝试下面的办法，刷新 DNS：</p><ol><li>Windows：在 CMD 窗口输入：<code>ipconfig /flushdns</code></li><li>Linux 命令：<code>sudo nscd restart</code>，如报错则须安装：<code>sudo apt install nscd</code> 或 <code>sudo /etc/init.d/nscd restart</code></li><li>Mac 命令：<code>sudo killall -HUP mDNSResponder</code></li></ol><p><strong>Tips：</strong> 上述方法无效可以尝试重启机器。</p><h4 id="2-2-2-自动方式"><a href="#2-2-2-自动方式" class="headerlink" title="2.2.2 自动方式"></a>2.2.2 自动方式</h4><p><strong>Tip</strong>：推荐 <a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Foldj%2FSwitchHosts">SwitchHosts</a> 工具管理 hosts</p><p>以 SwitchHosts 为例，看一下怎么使用的，配置参考下面：</p><ul><li>Title: 随意</li><li>Type: <code>Remote</code></li><li>URL: <code>https://raw.hellogithub.com/hosts</code></li><li>Auto Refresh: 最好选 <code>1 hour</code></li></ul><p>如图：</p><p><img src="/2022/03/06/github%E8%AE%BF%E9%97%AE%E6%85%A2%EF%BC%8C%E4%B8%80%E7%9B%B4%E4%B8%8D%E6%88%90%E5%8A%9F%EF%BC%8C%E9%9A%BE%E9%81%93%E9%9D%9E%E5%BE%97%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%E5%90%97/switch-hosts.png" style="zoom: 50%;"></p><p>这样每次 hosts 有更新都能及时进行更新，免去手动更新。</p><p><strong>结束语</strong>：</p><p>​    今天的分享就到这里了，欢迎大家关注微信公众号”<strong>菜鸟童靴</strong>“</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;github访问慢，一直不成功，难道非得科学上网吗，今天小编给你带来终极解决方案，让你不再为此而烦恼&lt;/p&gt;
    
    </summary>
    
    
      <category term="技术杂谈" scheme="http://yoursite.com/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="github" scheme="http://yoursite.com/tags/github/"/>
    
      <category term="科学上网" scheme="http://yoursite.com/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>pandas案例学习100例（一）</title>
    <link href="http://yoursite.com/2022/02/18/pandas%E6%A1%88%E4%BE%8B%E5%AD%A6%E4%B9%A0100%E4%BE%8B%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://yoursite.com/2022/02/18/pandas%E6%A1%88%E4%BE%8B%E5%AD%A6%E4%B9%A0100%E4%BE%8B%EF%BC%88%E4%B8%80%EF%BC%89/</id>
    <published>2022-02-18T07:00:30.000Z</published>
    <updated>2022-03-06T13:58:04.962Z</updated>
    
    <content type="html"><![CDATA[<p>hello 大家好，长时间没有发布新的文章，证明小编在这段日子不是很忙，就是很堕落，显然是后者了</p><p>捡起键盘，准备推出pandas 案例100系列，分十次记录学习，多了你也看不进去，我也写不进去：</p><a id="more"></a><p><strong>案例1：</strong></p><p>生成一年中，所有周一的日期：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成一年中，所有周一的日期</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">date_range = pd.date_range(start=<span class="string">'2021-01-01'</span>, end=<span class="string">'2021-12-31'</span>, freq=<span class="string">"W-MON"</span>)</span><br><span class="line">date_range = pd.date_range(start=<span class="string">'2021-01-01'</span>, periods=<span class="number">52</span>, freq=<span class="string">"W-MON"</span>)  <span class="comment"># 一年52个周</span></span><br><span class="line">print(date_range)</span><br></pre></td></tr></table></figure><p><strong>案例2：</strong></p><p>生成一个月份的所有日期</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成一个月份的所有日期</span></span><br><span class="line">date_range = pd.date_range(start=<span class="string">'2021-12-01'</span>, end=<span class="string">'2021-12-31'</span>)</span><br><span class="line">date_range = pd.date_range(start=<span class="string">'2021-12-01'</span>, periods=<span class="number">31</span>)  <span class="comment"># 一個月31天</span></span><br><span class="line">print(date_range)</span><br></pre></td></tr></table></figure><p><strong>案例3：</strong></p><p>生成一天的所有小時</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成一天的所有小時</span></span><br><span class="line">date_range = pd.date_range(start=<span class="string">'2021-12-01'</span>, periods=<span class="number">24</span>, freq=<span class="string">"H"</span>)</span><br><span class="line">date_range = pd.date_range(start=<span class="string">'2021-12-01'</span>, end=<span class="string">'2021-12-02'</span>, closed=<span class="string">"left"</span>, freq=<span class="string">"H"</span>)</span><br><span class="line">print(date_range)</span><br></pre></td></tr></table></figure><p><strong>案例4：</strong></p><p>使用list构造 Series</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># 使用list构造 Series</span></span><br><span class="line">sites = [<span class="string">"Google"</span>, <span class="string">"Runoob"</span>, <span class="string">"Wiki"</span>]</span><br><span class="line">myvar = pd.Series(sites)</span><br><span class="line">print(myvar)</span><br></pre></td></tr></table></figure><p><strong>案例5：</strong></p><p>使用dict 构造 Series</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用dict 构造 Series</span></span><br><span class="line">sites = &#123;<span class="string">'x'</span>: <span class="string">"Google"</span>, <span class="string">'y'</span>: <span class="string">"Runoob"</span>, <span class="string">'z'</span>: <span class="string">"Wiki"</span>&#125;</span><br><span class="line">myvar = pd.Series(sites)</span><br><span class="line">print(myvar)</span><br></pre></td></tr></table></figure><p><strong>案例6：</strong></p><p>Series转换list</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># Series转换list</span></span><br><span class="line">sites = &#123;<span class="string">'x'</span>: <span class="string">"Google"</span>, <span class="string">'y'</span>: <span class="string">"Runoob"</span>, <span class="string">'z'</span>: <span class="string">"Wiki"</span>&#125;</span><br><span class="line">myvar = pd.Series(sites)</span><br><span class="line">data = myvar.tolist()</span><br><span class="line">print(data)python</span><br></pre></td></tr></table></figure><p>案例7：</p><p>将Series转换DataFrame</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># 将Series转换DataFrame</span></span><br><span class="line">grades = &#123;<span class="string">'语文'</span>: <span class="string">"100"</span>, <span class="string">'数学'</span>: <span class="string">"120"</span>, <span class="string">'英语'</span>: <span class="string">"60"</span>&#125;</span><br><span class="line">myvar = pd.Series(grades)</span><br><span class="line">data = pd.DataFrame(myvar, columns=[<span class="string">"grade"</span>])</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure><p><strong>案例8：</strong></p><p>用numpy 创建Series</p><p>101    10.0<br>102    20.0<br>103    30.0<br>104    40.0<br>105    50.0<br>106    60.0<br>107    70.0<br>108    80.0<br>109    90.0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 用numpy 创建Series</span></span><br><span class="line">s = pd.Series(</span><br><span class="line">    np.arange(<span class="number">10</span>, <span class="number">100</span>, <span class="number">10</span>),  <span class="comment"># 数值：10-90，间隔10</span></span><br><span class="line">    index=np.arange(<span class="number">101</span>, <span class="number">110</span>),  <span class="comment"># 索引：101-109， 间隔7</span></span><br><span class="line">    dtype=<span class="string">"float"</span>  <span class="comment"># 类型：float64</span></span><br><span class="line">)</span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure><p><strong>案例9：</strong></p><p> 转换Series 的数据类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换Series 的数据类型</span></span><br><span class="line">s = pd.Series(</span><br><span class="line">    data=[<span class="string">"001"</span>, <span class="string">"002"</span>, <span class="string">"003"</span>, <span class="string">"004"</span>],</span><br><span class="line">    index=list(<span class="string">"abcd"</span>),</span><br><span class="line">    dtype=<span class="string">"float"</span>  <span class="comment"># 类型：float64</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">s = s.astype(int)  <span class="comment"># 方法一</span></span><br><span class="line"><span class="comment"># s = s.map(int)# 方法二</span></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure><p><strong>案例10：</strong></p><p>给Series添加元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给Series添加元素</span></span><br><span class="line">grades = &#123;<span class="string">'语文'</span>: <span class="string">"100"</span>, <span class="string">'数学'</span>: <span class="string">"120"</span>, <span class="string">'英语'</span>: <span class="string">"60"</span>&#125;</span><br><span class="line">data = pd.Series(grades)</span><br><span class="line">data = data.append(pd.Series(&#123;</span><br><span class="line">    <span class="string">"计算机"</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">"化学"</span>: <span class="number">45</span></span><br><span class="line">&#125;))</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure><p><strong>案例11：</strong></p><p>用reset index将Series 转换成df</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># 用reset index将Series 转换成df</span></span><br><span class="line">grades = &#123;<span class="string">'语文'</span>: <span class="string">"100"</span>, <span class="string">'数学'</span>: <span class="string">"120"</span>, <span class="string">'英语'</span>: <span class="string">"60"</span>&#125;</span><br><span class="line">data = pd.Series(grades)</span><br><span class="line">df = data.reset_index()</span><br><span class="line">df.columns = [<span class="string">"course"</span>, <span class="string">"grade"</span>]</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;hello 大家好，长时间没有发布新的文章，证明小编在这段日子不是很忙，就是很堕落，显然是后者了&lt;/p&gt;
&lt;p&gt;捡起键盘，准备推出pandas 案例100系列，分十次记录学习，多了你也看不进去，我也写不进去：&lt;/p&gt;
    
    </summary>
    
    
      <category term="数据分析" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>python如何批量改文件后缀和图片像素大小</title>
    <link href="http://yoursite.com/2021/12/21/python%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%92%8C%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0%E5%A4%A7%E5%B0%8F/"/>
    <id>http://yoursite.com/2021/12/21/python%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%92%8C%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0%E5%A4%A7%E5%B0%8F/</id>
    <published>2021-12-21T14:05:20.000Z</published>
    <updated>2022-03-06T13:58:01.276Z</updated>
    
    <content type="html"><![CDATA[<p>hello 大家好，我是Monday，就在我写完pandas学习案例100第一篇的时候，在图片素材里找封面图时，发现已经没有新的封面图了</p><p>都是使用过的了，于是乎，我从网上下载了一批新的图片素材，正当我满意的时候，上传时，发现</p><a id="more"></a><p><img src="/2021/12/21/python%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%92%8C%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0%E5%A4%A7%E5%B0%8F/2.png" style="zoom: 50%;"></p><p>我下载的图片都是webp后缀的，格式不被允许上传，这时候我们改文件的后缀为平台支持的格式就可以了，</p><p>重点来了，那么图片难道要一个一个手动改吗，No No No，会Python的你，当然应该是写个小工具批量改了</p><p>附带源码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出当前目录下所有的文件</span></span><br><span class="line">path = <span class="string">r"C:\Users\xx\Desktop\公众号素材"</span></span><br><span class="line">files = os.listdir(path)</span><br><span class="line"><span class="keyword">for</span> index, filename <span class="keyword">in</span> enumerate(files):</span><br><span class="line">    portion = os.path.splitext(filename)</span><br><span class="line">    <span class="comment"># 判断后缀</span></span><br><span class="line">    <span class="keyword">if</span> portion[<span class="number">1</span>] == <span class="string">".webp"</span>:</span><br><span class="line">        <span class="comment"># 重新组合文件名和后缀名</span></span><br><span class="line">        newname = path + <span class="string">"\\"</span> + str(index) + <span class="string">".jpg"</span></span><br><span class="line">        filename = path + <span class="string">"\\"</span> + filename</span><br><span class="line">        os.rename(filename, newname)</span><br></pre></td></tr></table></figure><p>看下效果：</p><p><img src="/2021/12/21/python%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%92%8C%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0%E5%A4%A7%E5%B0%8F/3.jpg" style="zoom: 50%;"></p><p>本以为完美的落幕，然并卵再次上传，发现如下图的问题</p><p><img src="/2021/12/21/python%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%92%8C%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0%E5%A4%A7%E5%B0%8F/0.jpg" style="zoom: 50%;"></p><p>继续盘他，写个脚本批量更改像素:</p><p>源码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">IPHONE5_WIDTH = <span class="number">530</span> <span class="comment">#改变后的宽</span></span><br><span class="line">IPHONE5_HEIGHT = <span class="number">300</span><span class="comment">#改变后的高</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 改变图片的尺寸大小</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reset_pic_size</span><span class="params">(file_path, new_path, width=IPHONE5_WIDTH, height=IPHONE5_HEIGHT)</span>:</span></span><br><span class="line">    image = Image.open(file_path)</span><br><span class="line">    image_width, image_height = image.size</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> image_width &gt; width:</span><br><span class="line">        image_height = width * image_height // image_width</span><br><span class="line">        image_width = width</span><br><span class="line">    <span class="keyword">if</span> image_height &gt; height:</span><br><span class="line">        image_width = height * image_width // image_height</span><br><span class="line">        image_height = height</span><br><span class="line"></span><br><span class="line">    new_image = image.resize((image_width, image_height), Image.ANTIALIAS)  <span class="comment"># 滤镜缩放</span></span><br><span class="line">    new_image.save(new_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件夹中循环改变每一张图片</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_and_resize_pic_from_dir</span><span class="params">(dir_path, new_path)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(dir_path):</span><br><span class="line">        <span class="keyword">for</span> file_name <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> file_name.lower().endswith(<span class="string">'jpg'</span>) <span class="keyword">or</span> file_name.lower().endswith(<span class="string">'png'</span>):</span><br><span class="line">                file_path = os.path.join(root, file_name)</span><br><span class="line">                new_file_path = new_path + file_name</span><br><span class="line">                reset_pic_size(file_path=file_path, new_path=new_file_path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    </span><br><span class="line">    file_new_path = <span class="string">r'C:\Users\XX\Desktop\公众号素材\new_'</span></span><br><span class="line">    find_and_resize_pic_from_dir(<span class="string">r'C:\Users\XX\Desktop\公众号素材'</span>, file_new_path)</span><br></pre></td></tr></table></figure><p>万事具备，看看能不能如愿上传：</p><p><img src="/2021/12/21/python%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%92%8C%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0%E5%A4%A7%E5%B0%8F/1.png" style="zoom: 50%;"></p><p>完美</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;hello 大家好，我是Monday，就在我写完pandas学习案例100第一篇的时候，在图片素材里找封面图时，发现已经没有新的封面图了&lt;/p&gt;
&lt;p&gt;都是使用过的了，于是乎，我从网上下载了一批新的图片素材，正当我满意的时候，上传时，发现&lt;/p&gt;
    
    </summary>
    
    
      <category term="python进阶" scheme="http://yoursite.com/categories/python%E8%BF%9B%E9%98%B6/"/>
    
    
  </entry>
  
  <entry>
    <title>深入浅出，JS原型链的工作原理和hook</title>
    <link href="http://yoursite.com/2021/07/06/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%EF%BC%8CJS%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8Chook/"/>
    <id>http://yoursite.com/2021/07/06/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%EF%BC%8CJS%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8Chook/</id>
    <published>2021-07-06T14:42:39.000Z</published>
    <updated>2021-07-06T15:12:57.313Z</updated>
    
    <content type="html"><![CDATA[<p>前言：原型链，即原型链条。它是由原型、原型的原型、原型的原型的原型…这一规则组合成的，经常被应用于继承。</p><a id="more"></a><p><strong>原型的作用</strong></p><p>在JS中，每个对象都有自己的原型。当我们访问对象的属性和方法时，JS会先访问对象本身的属性和方法。如果对象本身不包含这些属性和方法，则访问对象对应的原型。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 对象自身的属性</span></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 对象自身的方法</span></span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原型上的方法</span></span><br><span class="line">Person.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Person(<span class="string">"XiaoMing"</span>,<span class="number">12</span>);</span><br><span class="line"><span class="keyword">var</span> xiaoHong = <span class="keyword">new</span> Person(<span class="string">"XiaoHong"</span>,<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用自身不存在的方法</span></span><br><span class="line">xiaoming.sayAge(); <span class="comment">// 12</span></span><br><span class="line">xiaoHong.sayAge(); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure><p>上述例子中，方法“sayAge”是在原型上而非对象中。（关于对象与原型之间更为详细的内容，可阅读文章：<a href="https://segmentfault.com/img/bVbkATy" target="_blank" rel="noopener">《浅谈JS中的构造函数、原型对象(prototype)、实例中的属性/方法之间的关系》</a>）</p><p><strong>原型链的原理</strong></p><p>原型自身也是一个对象（默认情况下所有对象都是Object的实例)。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(xiaoming instanceof Object); &#x2F;&#x2F; true alert(Person.prototype instanceof Object); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure><p>每个对象都有自己的原型，所以Person的原型也有它自己的原型，那就是：Object.prototype(部分浏览器允许通过实例的“<strong>proto</strong>”属性访问其原型)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(Person.prototype.__proto__ &#x3D;&#x3D; Object.prototype); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure><p>既然原型是一个对象，那么，当我们访问的属性和方法在原型不存在，就会继续访问原型的原型，直至Object.prototype。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在Object.prototype增加一个“自我介绍”的方法</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.introduce = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;**</span><br><span class="line">    alert(<span class="string">"My name is "</span> + <span class="keyword">this</span>.name + <span class="string">",I'm "</span> + <span class="keyword">this</span>.age + <span class="string">" years old!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Person(<span class="string">"XiaoMing"</span>,<span class="number">12</span>);</span><br><span class="line"><span class="comment">// 调用对象自身和原型上均不存在的方法</span></span><br><span class="line">xiaoming.introduce(); <span class="comment">// My name is XiaoMing,I'm 12 years old!</span></span><br></pre></td></tr></table></figure><p><img src="/2021/07/06/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%EF%BC%8CJS%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8Chook/1.png" alt="img"></p><p><strong>原型链hook案例一：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">String</span>.prototype.split_bk = <span class="built_in">String</span>.prototype.split;</span><br><span class="line"><span class="built_in">String</span>.prototype.split = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">    str = <span class="keyword">this</span>.toString()</span><br><span class="line">    <span class="keyword">debugger</span>;</span><br><span class="line">    <span class="keyword">return</span> str.split_bk(val)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">a = <span class="string">"加密字符串"</span>;</span><br><span class="line">a.split(<span class="string">"加密"</span>)</span><br></pre></td></tr></table></figure><p><strong>*原型链hook案例二</strong></p><p><img src="/2021/07/06/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%EF%BC%8CJS%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8Chook/2.png" alt="image-20210706231047752"></p><p><strong>总结</strong></p><p>原型链是JS的一个特性，它实现的核心机制是：</p><p>1、访问对象的属性(方法)时，若对象本身不存在该属性(方法)，则会转向访问该对象的原型；</p><p>2、对象的原型也是一个对象。访问的属性(方法)依旧不存在于该原型，则会继续访问该原型的原型…</p><p>参考链接：<a href="https://segmentfault.com/a/1190000017254949" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017254949</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前言：原型链，即原型链条。它是由原型、原型的原型、原型的原型的原型…这一规则组合成的，经常被应用于继承。&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="逆向" scheme="http://yoursite.com/tags/%E9%80%86%E5%90%91/"/>
    
      <category term="js" scheme="http://yoursite.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>android设备指纹</title>
    <link href="http://yoursite.com/2021/06/29/android%E8%AE%BE%E5%A4%87%E6%8C%87%E7%BA%B9/"/>
    <id>http://yoursite.com/2021/06/29/android%E8%AE%BE%E5%A4%87%E6%8C%87%E7%BA%B9/</id>
    <published>2021-06-29T15:14:21.000Z</published>
    <updated>2021-06-29T15:18:48.726Z</updated>
    
    <content type="html"><![CDATA[<p><strong>1　Android 设备指纹</strong></p><p>设备ID 需要兼具稳定性和唯一性，Android 系统的开源和碎片化导致API 函数实现各不相同，所以兼容性是Android 系统中设备指纹面临的最大挑战。表4.1列举了Android 系统中比较稳定的设备参数</p><a id="more"></a><p><img src="/2021/06/29/android%E8%AE%BE%E5%A4%87%E6%8C%87%E7%BA%B9/1.jpg" alt="img"></p><p>目前国内Android 6以上的手机占比已经超过了85%。由于考虑到用户的隐私，高版本Android 系统增加了设备信息采集的限制。</p><p><strong>2、Android Q 介绍（百度百科）：</strong></p><p>Android Q 是<a href="https://baike.baidu.com/item/谷歌/117920" target="_blank" rel="noopener">谷歌</a>公司在2019年推出的新一代<a href="https://baike.baidu.com/item/操作系统/192" target="_blank" rel="noopener">操作系统</a>。适用于<a href="https://baike.baidu.com/item/手机/6342" target="_blank" rel="noopener">手机</a>、平板电脑等移动终端设备 [1] 。Android Q的首个开发者预览版本（即测试版）在2019年3月14日发行并提供下载。正式版于2019年9月3日发行。此版本Android是各Android版本中，首次不用甜品来命名。该版本借助深色主题和手势导航打造应用体验。为确保用户隐私和安全支持新的保护措施。借助高性能编解码器、更出色的生物识别技术、更快的应用启动速度、Vulkan 1.1、NNAPI 1.2、可折叠设备和 5G 等更多功能扩展。</p><p>Android Q 于2019年9月份发布，出于对用户隐私的考虑，Android Q 限制了采集设备标识符，为Android 设备指纹带来了前所未有的挑战。Android Q 禁止非系统应用访问用户不可更改的ID，包括IMEI 号、Serial、USB 序列号等。系统Wi-Fi MAC 地址默认是随机生成的，不是固定的MAC 地址，以防止用户隐私被追踪。我们实际测试发现，IMEI、IMSI、Serial、Bluetooth MAC 都已无法获取参数，Wi-Fi MAC 获取不到真实值，但与BSSID 绑定。因此，Android Q 设备指纹的适配，不仅仅是采集函数的兼容，更重要的是设备ID 恢复逻辑（当用户修改手机某些信息时保持设备ID 不变的计算逻辑）的兼容。</p><p>从理论上来说，所有的采集项都是Android 系统公开的API，不可能在采集项被大面积篡改的情况下保持设备ID 不变。因此，设备指纹还需要对APP 运行环境进行监测，以识别异常环境。</p><p><strong>3、针对Android 作弊环境的检测方法可以归纳为以下5个方面：</strong></p><p>· 通过安装包检测安装的作弊工具。</p><p>· 通过特定特征识别root 环境。</p><p>· 使用多种方案采集同一字段信息。</p><p>· 通过通用性的作弊原理识别运行的作弊框架hook（Java/native）。</p><p>· 通过特定特征识别运行的作弊工具和模拟器。Android 黑产工具更新速度很快，样式层出不穷，需要通过黑产情报不断搜集最新的作弊方法。</p><p><strong>4、相关文章推荐：</strong></p><p><strong>Android唯一识别号（设备指纹）的生成及原理</strong></p><p><a href="https://blog.csdn.net/xiechengfa/article/details/70049409?utm_source=itdadao&amp;utm_medium=referral" target="_blank" rel="noopener">https://blog.csdn.net/xiechengfa/article/details/70049409?utm_source=itdadao&amp;utm_medium=referral</a></p><p><strong>Android硬件开发系列一指纹识别</strong></p><p><a href="https://blog.csdn.net/u010019468/article/details/70332710" target="_blank" rel="noopener">https://blog.csdn.net/u010019468/article/details/70332710</a></p><p><strong>Android 设备指纹</strong></p><p><a href="https://blog.csdn.net/DeckeDeng/article/details/78481423?locationNum=1&amp;fps=1" target="_blank" rel="noopener">https://blog.csdn.net/DeckeDeng/article/details/78481423?locationNum=1&amp;fps=1</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;1　Android 设备指纹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;设备ID 需要兼具稳定性和唯一性，Android 系统的开源和碎片化导致API 函数实现各不相同，所以兼容性是Android 系统中设备指纹面临的最大挑战。表4.1列举了Android 系统中比较稳定的设备参数&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="风控、 逆向" scheme="http://yoursite.com/tags/%E9%A3%8E%E6%8E%A7%E3%80%81-%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>Python进阶之atexit模块使用</title>
    <link href="http://yoursite.com/2021/06/12/Python%E8%BF%9B%E9%98%B6%E4%B9%8Batexit%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2021/06/12/Python%E8%BF%9B%E9%98%B6%E4%B9%8Batexit%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/</id>
    <published>2021-06-12T14:06:23.000Z</published>
    <updated>2021-06-12T14:09:31.740Z</updated>
    
    <content type="html"><![CDATA[<p>如何让程序退出时强行执行一段代码，说起这个需求，我们就不得不说<strong>Python atexit</strong>模块了：</p><a id="more"></a><p><strong>退出处理器</strong> <code>atexit</code> 模块定义了清理函数的注册和反注册函数. 被注册的函数会在解释器正常终止时执行. <code>atexit</code> 会按照注册顺序的<em>逆序</em>执行; 如果你注册了 <code>A</code>, <code>B</code> 和 <code>C</code>, 那么在解释器终止时会依序执行 <code>C</code>, <code>B</code>, <code>A</code>.</p><p>看完这段介绍，有点类似栈的原理，后进先出</p><p><strong>1、举个例子说明：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def goodbye(name, adjective):</span><br><span class="line">   print(&quot;Goodbye %s, it was %s to meet you.&quot;% (name, adjective))</span><br><span class="line"></span><br><span class="line">def hello():</span><br><span class="line">   print(&#39;hello world!&#39;)</span><br><span class="line"></span><br><span class="line">def a():</span><br><span class="line">   print(&#39;a&#39;)</span><br><span class="line"></span><br><span class="line">import atexit</span><br><span class="line">atexit.register(goodbye, &#39;Mr.Yang&#39;, &#39;nice&#39;)#3</span><br><span class="line">atexit.register(a)#2</span><br><span class="line">hello()#1正常程序首先被执行</span><br><span class="line"></span><br><span class="line">#执行顺序 1 2 3</span><br></pre></td></tr></table></figure><p><strong>运行结果</strong></p><p><img src="/2021/06/12/Python%E8%BF%9B%E9%98%B6%E4%B9%8Batexit%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/Python进阶之atexit模块使用\1.jpg" alt="图片"></p><p><strong>2、 作为 [decorator]: 使用，使用场景， 但是只适用于没有参数时调用</strong></p><p>举例说明，对上述代码稍作修改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import atexit</span><br><span class="line"></span><br><span class="line">def hello():</span><br><span class="line">   print(&#39;hello world!&#39;)</span><br><span class="line">@atexit.register</span><br><span class="line">def a():</span><br><span class="line">   print(&#39;a&#39;)</span><br><span class="line"></span><br><span class="line">hello()</span><br><span class="line"></span><br><span class="line">#运行结果</span><br><span class="line">#hello world!</span><br><span class="line">#a</span><br></pre></td></tr></table></figure><p> <strong>3、取消注册， 示例如下。</strong> </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def goodbye(name, adjective):</span><br><span class="line">   print(&quot;Goodbye %s, it was %s to meet you.&quot;% (name, adjective))</span><br><span class="line"></span><br><span class="line">def hello():</span><br><span class="line">   print(&#39;hello world!&#39;)</span><br><span class="line"></span><br><span class="line">def a():</span><br><span class="line">   print(&#39;a&#39;)</span><br><span class="line"></span><br><span class="line">import atexit</span><br><span class="line">atexit.register(goodbye, &#39;Mr.Yang&#39;, &#39;nice&#39;)#3</span><br><span class="line">atexit.register(a)#2</span><br><span class="line">hello()#1正常程序首先被执行</span><br><span class="line">atexit.unregister(a)</span><br><span class="line">#正常执行顺序 1 2 3</span><br><span class="line"></span><br><span class="line">#由于设置了取消注册atexit.unregister(a)，</span><br><span class="line"></span><br><span class="line">#注销后执行顺序 1 3</span><br></pre></td></tr></table></figure><p><strong>运行结果：</strong></p><p><img src="/2021/06/12/Python%E8%BF%9B%E9%98%B6%E4%B9%8Batexit%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/Python进阶之atexit模块使用\2.jpg" alt="图片"></p><p>这个模块一般用来在程序结束时，做资源清理。</p><p><strong>应用场景一：</strong></p><p> 既能让程序报错，又能在报错已经还能运行<code>clean()</code>呢？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import atexit</span><br><span class="line"></span><br><span class="line">@atexit.register</span><br><span class="line">def clean():</span><br><span class="line">   print(&#39;清理环境相关的代码&#39;)</span><br><span class="line"></span><br><span class="line">def test():</span><br><span class="line">   example &#x3D; &#123;&quot;a&quot;: 1, &quot;b&quot;: 2&#125;</span><br><span class="line">   print(example[&quot;c&quot;])#程序报错</span><br><span class="line">test()</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img src="/2021/06/12/Python%E8%BF%9B%E9%98%B6%E4%B9%8Batexit%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/Python进阶之atexit模块使用\3.jpg" alt="图片"></p><p>这样一来，我们不需要显式调用<code>clean</code>函数了。无论程序正常结束，还是程序异常报错，<code>clean</code>函数里面的内容总会执行。</p><p><strong>*\</strong>官方文档*<em>：<a href="https://docs.python.org/zh-cn/3.7/library/atexit.html\**" target="_blank" rel="noopener">https://docs.python.org/zh-cn/3.7/library/atexit.html\**</a></em> </p><p><strong><em>*参考链接：\</em></strong><a href="https://mp.weixin.qq.com/s/lNwSBhcp9ktwgaGWpXNq-A*" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/lNwSBhcp9ktwgaGWpXNq-A*</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如何让程序退出时强行执行一段代码，说起这个需求，我们就不得不说&lt;strong&gt;Python atexit&lt;/strong&gt;模块了：&lt;/p&gt;
    
    </summary>
    
    
      <category term="python基础" scheme="http://yoursite.com/categories/python%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="python基础" scheme="http://yoursite.com/tags/python%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>使用NanoHTTPD反射调用加密函数（一）</title>
    <link href="http://yoursite.com/2021/06/12/%E4%BD%BF%E7%94%A8NanoHTTPD%E5%8F%8D%E5%B0%84%E8%B0%83%E7%94%A8%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0/"/>
    <id>http://yoursite.com/2021/06/12/%E4%BD%BF%E7%94%A8NanoHTTPD%E5%8F%8D%E5%B0%84%E8%B0%83%E7%94%A8%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0/</id>
    <published>2021-06-12T13:47:56.000Z</published>
    <updated>2021-06-14T12:34:28.086Z</updated>
    
    <content type="html"><![CDATA[<p>利用NanoHTTPD反射调用Android APP加密函数，前奏之初识NanoHTTPD</p><a id="more"></a><h3 id="1-NanoHTTPD介绍"><a href="#1-NanoHTTPD介绍" class="headerlink" title="1.NanoHTTPD介绍"></a>1.NanoHTTPD介绍</h3><p>什么是NanoHTTPD？NanoHTTPD是一个免费、轻量级的(只有一个Java文件) HTTP服务器，可以很好地嵌入到Java程序中。支持 GET, POST, PUT等请求，支持文件上传，占用内存很小。</p><p>项目地址：<a href="https://github.com/NanoHttpd/nanohttpd" target="_blank" rel="noopener">https://github.com/NanoHttpd/nanohttpd</a></p><h3 id="2-如何嵌入？"><a href="#2-如何嵌入？" class="headerlink" title="2. 如何嵌入？"></a>2. 如何嵌入？</h3><ol><li>在build.gradle中增加一个依赖（已经懒到一定境界了，能自动的，绝不手动下载配置）：</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &#39;org.nanohttpd:nanohttpd:2.2.0&#39;</span><br></pre></td></tr></table></figure><ol><li>在包里增加一个java文件：AndroidWebServer.java`：</li></ol><p><strong>3、打开“app/src/main/AndroidManifest.xml”，在manifest标签中加入网络权限的声明，不加会报“java.net.SocketException: socket failed: EACCES ”异常错误</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><strong>4、编写NanoHTTPD的server服务</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ceshi;</span><br><span class="line"><span class="keyword">import</span> fi.iki.elonen.NanoHTTPD;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义一个Server继承NanoHTTPD</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AndroidWebServer</span> <span class="keyword">extends</span> <span class="title">NanoHTTPD</span> </span>&#123;</span><br><span class="line">    <span class="comment">//构造函数 赋值父类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AndroidWebServer</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Response <span class="title">serve</span><span class="params">(IHTTPSession session)</span> </span>&#123;</span><br><span class="line">        String msg = <span class="string">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello AutoPy&lt;/h1&gt;\n"</span>;</span><br><span class="line">        Map&lt;String, String&gt; parms = session.getParms();</span><br><span class="line">        <span class="keyword">if</span> (parms.get(<span class="string">"code"</span>) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            msg += <span class="string">"&lt;form action='?' method='get'&gt;\n  &lt;p&gt;Your code: &lt;input type='text' name='code'&gt;&lt;/p&gt;\n"</span> + <span class="string">"&lt;/form&gt;\n"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            msg += <span class="string">"&lt;p&gt;Hello, "</span> + parms.get(<span class="string">"code"</span>) + <span class="string">"!&lt;/p&gt;"</span>;</span><br><span class="line">            <span class="keyword">return</span> newFixedLengthResponse(msg + <span class="string">"&lt;/body&gt;&lt;/html&gt;\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newFixedLengthResponse(msg + <span class="string">"&lt;/body&gt;&lt;/html&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5、在MainActivity类中编写如下代码，启用NanoHTTPD服务</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ceshi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    AndroidWebServer http = <span class="keyword">new</span> AndroidWebServer(<span class="number">9988</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainActivity</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            http.start();</span><br><span class="line">            System.out.println(<span class="string">"服务启动完成"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">"服务启动错误"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//安卓销毁事件</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        http.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>6、启动app</strong></p><p><strong>7、端口转发</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb forward tcp:9988 tcp:9988</span><br></pre></td></tr></table></figure><p><strong>8、调用接口</strong></p><p><img src="/2021/06/12/%E4%BD%BF%E7%94%A8NanoHTTPD%E5%8F%8D%E5%B0%84%E8%B0%83%E7%94%A8%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0/1.png" alt></p><p><strong>输入ss回车：</strong></p><p><img src="/2021/06/12/%E4%BD%BF%E7%94%A8NanoHTTPD%E5%8F%8D%E5%B0%84%E8%B0%83%E7%94%A8%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0/2.png" alt></p><p><strong>参考文章;</strong></p><p>安卓NanoHTTPD的快速入门</p><p><a href="https://blog.csdn.net/u013738666/article/details/104776840" target="_blank" rel="noopener">https://blog.csdn.net/u013738666/article/details/104776840</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;利用NanoHTTPD反射调用Android APP加密函数，前奏之初识NanoHTTPD&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="逆向，NanoHTTPD" scheme="http://yoursite.com/tags/%E9%80%86%E5%90%91%EF%BC%8CNanoHTTPD/"/>
    
  </entry>
  
  <entry>
    <title>androidStudio建立的项目没有libs目录</title>
    <link href="http://yoursite.com/2021/06/11/androidStudio%E5%BB%BA%E7%AB%8B%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%B2%A1%E6%9C%89libs%E7%9B%AE%E5%BD%95/"/>
    <id>http://yoursite.com/2021/06/11/androidStudio%E5%BB%BA%E7%AB%8B%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%B2%A1%E6%9C%89libs%E7%9B%AE%E5%BD%95/</id>
    <published>2021-06-10T16:03:12.000Z</published>
    <updated>2021-06-11T14:18:20.514Z</updated>
    
    <content type="html"><![CDATA[<p>ndroid studio建立的项目没有libs目录<br>有时候建立新项目，没有看到lib文件夹，但是文件目录里又有</p><a id="more"></a><p>android studio建立的项目没有libs目录<br>有时候建立新项目，没有看到lib文件夹，但是文件目录里又有<br><img src="/2021/06/11/androidStudio%E5%BB%BA%E7%AB%8B%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%B2%A1%E6%9C%89libs%E7%9B%AE%E5%BD%95/androidStudio建立的项目没有libs目录\1.jpg" alt><br><img src="/2021/06/11/androidStudio%E5%BB%BA%E7%AB%8B%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%B2%A1%E6%9C%89libs%E7%9B%AE%E5%BD%95/androidStudio建立的项目没有libs目录\2.jpg" alt></p><p><strong>原因是显示目录的原因，切换成Project就可以了</strong><br><img src="/2021/06/11/androidStudio%E5%BB%BA%E7%AB%8B%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%B2%A1%E6%9C%89libs%E7%9B%AE%E5%BD%95/androidStudio建立的项目没有libs目录\3.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ndroid studio建立的项目没有libs目录&lt;br&gt;有时候建立新项目，没有看到lib文件夹，但是文件目录里又有&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="逆向，AndroidStudio" scheme="http://yoursite.com/tags/%E9%80%86%E5%90%91%EF%BC%8CAndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>python进阶之上下文管理器</title>
    <link href="http://yoursite.com/2021/06/10/%E8%BF%9B%E9%98%B6%E4%B9%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"/>
    <id>http://yoursite.com/2021/06/10/%E8%BF%9B%E9%98%B6%E4%B9%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/</id>
    <published>2021-06-10T13:38:15.000Z</published>
    <updated>2021-06-10T13:43:59.830Z</updated>
    
    <content type="html"><![CDATA[<p><strong>一、文管理器作用</strong>：</p><p>上下⽂管理器允许你在有需要的时候，精确地分配和释放资源。</p><a id="more"></a><p><strong>二、案例介绍：</strong></p><p>对它使⽤最⼴泛的案例就是with语句了。想象下当你有两个相关操作，你想让它们结对执⾏，然后在它们俩中间放置⼀段代码。</p><p>上下⽂管理器就是专门让你做这个事情的。举个例⼦：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'some_file'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> opened_file: </span><br><span class="line">  opened_file.write(<span class="string">'Hola!'</span>)</span><br></pre></td></tr></table></figure><p>上⾯这段代码打开了⼀个⽂件，往它⾥⾯写⼊了⼀些数据，然后关闭了它。如果在往⽂件</p><p>写数据时发⽣异常，它会尝试去关闭⽂件。上⾯那段代码与这⼀段是等价的：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">file = open(<span class="string">'some_file'</span>, <span class="string">'w'</span>) </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"></span><br><span class="line">  file.write(<span class="string">'Hola!'</span>) </span><br><span class="line"><span class="keyword">finally</span>: </span><br><span class="line">  file.close()</span><br></pre></td></tr></table></figure><p>对比两个功能一样的代码，相比较之下，with 代码更简洁，去掉了很多样板代码，它确保我们的⽂件会被关闭。</p><p><strong>三、使用上下文管理器with的优点：</strong></p><p>（1）使用with语句的目的就是把代码块放入with中执行，with结束后，自动完成清理工作，无须手动干预。</p><p>（2）在需要管理一些资源比如文件，网络连接和锁的编程环境中，可以在<strong>exit</strong>中定制自动释放资源的机制，你无须再去关系这个问题，这将大有用处。</p><p><strong>四、如何上下文管理器</strong>：</p><p><strong>1、基于类的实现</strong></p><p>⼀个上下⽂管理器的类，最起码要定义<strong>enter</strong>和<strong>exit</strong>⽅法。</p><p>让我们来构造我们⾃⼰的⽂件开启的上下⽂管理器，并学习下基础知识。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">File</span><span class="params">(object)</span>:</span> </span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, file_name, method)</span>:</span></span><br><span class="line">          self.file_obj = open(file_name, method) </span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">          <span class="keyword">return</span> self.file_obj </span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, type, value, traceback)</span>:</span></span><br><span class="line">          self.file_obj.close()</span><br></pre></td></tr></table></figure><p>通过定义<strong>enter</strong>和<strong>exit</strong>⽅法，我们可以在with语句⾥使⽤它。我们来试试：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">with</span> File(<span class="string">'demo.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> opened_file: </span><br><span class="line">  opened_file.write(<span class="string">'Hola!'</span>)</span><br></pre></td></tr></table></figure><p>我们的<strong>exit</strong>函数接受三个参数。这些参数对于每个上下⽂管理器类中的<strong>exit</strong> </p><p>⽅法都是必须的。我们来谈谈在底层都发⽣了什么。</p><ol><li><p>with语句先暂存了File类的<strong>exit</strong>⽅法</p></li><li><p>然后它调⽤File类的<strong>enter</strong>⽅法</p></li><li><p><strong>enter</strong>⽅法打开⽂件并返回给with语句</p></li><li><p>打开的⽂件句柄被传递给opened_file参数</p></li><li><p>我们使⽤.write()来写⽂件</p></li><li><p>with语句调⽤之前暂存的<strong>exit</strong>⽅法</p></li><li><p><strong>exit</strong>⽅法关闭了⽂件</p></li></ol><p><strong>（**</strong>1） 如何处理异常** </p><p>我们还没有谈到<strong>exit</strong>⽅法的这三个参数：type, value和traceback。</p><p>在第4步和第6步之间，如果发⽣异常，Python会将异常的type,value和traceback传递</p><p>到<strong>exit</strong>⽅法。</p><p>它让<strong>exit</strong>⽅法来决定如何关闭⽂件以及是否需要其他步骤。在我们的案例中，我们</p><p>并没有注意它们。</p><p>那如果我们的⽂件对象抛出⼀个异常呢？万⼀我们尝试访问⽂件对象的⼀个不⽀持的⽅</p><p>法。举个例⼦：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">with</span> File(<span class="string">'demo.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> opened_file: </span><br><span class="line">    opened_file.undefined_function(<span class="string">'Hola!'</span>)</span><br></pre></td></tr></table></figure><p>我们来列⼀下，当异常发⽣时，with语句会采取哪些步骤。</p><ol><li><p>它把异常的type,value和traceback传递给<strong>exit</strong>⽅法</p></li><li><p>它让<strong>exit</strong>⽅法来处理异常</p></li><li><p>如果<strong>exit</strong>返回的是True，那么这个异常就被优雅地处理了。</p></li><li><p>如果<strong>exit</strong>返回的是True以外的任何东西，那么这个异常将被with语句抛出</p></li></ol><p>（<strong>2）怎么优雅的去处理异常：</strong></p><p>看到处理异常那里，我们仅仅就是在发生异常时，文件能正常被关闭，不需要抛出异常</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, type, value, traceback)</span>:</span> </span><br><span class="line">    print(<span class="string">"Exception has been handled"</span>) </span><br><span class="line">    self.file_obj.close() </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>我们仅仅return True，这么做就可以了</p><p><strong>完整代码：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Open</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, filepath, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span>:</span></span><br><span class="line">        self.filepath = filepath</span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.encoding = encoding</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># print('enter')</span></span><br><span class="line">        self.f = open(self.filepath, mode=self.mode, encoding=self.encoding)</span><br><span class="line">        <span class="keyword">return</span> self.f</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        <span class="comment"># print('exit')</span></span><br><span class="line">        self.f.close()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, item)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getattr(self.f, item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Open(<span class="string">'a.txt'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(f)</span><br><span class="line">    f.write(<span class="string">'aaaaaa'</span>)</span><br><span class="line">    <span class="comment">#f.wasdf() #抛出异常，交给__exit__处理</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;一、文管理器作用&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;上下⽂管理器允许你在有需要的时候，精确地分配和释放资源。&lt;/p&gt;
    
    </summary>
    
    
      <category term="python基础" scheme="http://yoursite.com/categories/python%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="python基础" scheme="http://yoursite.com/tags/python%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>如何抓取国外网站、app的包</title>
    <link href="http://yoursite.com/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/"/>
    <id>http://yoursite.com/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/</id>
    <published>2021-06-10T13:32:16.000Z</published>
    <updated>2021-06-14T12:36:11.009Z</updated>
    
    <content type="html"><![CDATA[<p><strong>前期准备：</strong></p><p>  配置好的Charles抓包工具，（可以抓正常国内的APP端和网页端的包）</p><p>  设置好的vpn，（可以访问国外的网站）</p><a id="more"></a><p><strong>操作环境</strong>：以windows为例</p><p>打开vpn后，我们访问一下国外的网站，测试一下vpn访问是否正常</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/1.jpg" alt></p><p>我习惯直接访问网站测试，大家也可以使用下图所示测试：</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/2.jpg" alt></p><p>访问正常，我们打开Chrome游览器的代理设置，显示如下图所示：</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/3.jpg" alt></p><p>图一</p><p><strong>1、配置抓取网站的数据包</strong></p><p>准备工作做好，接下来开始配置Charles抓包工具：</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/4.jpg" alt></p><p>依次点击之后我看到如下界面，填入图一的信息并勾选截图选项点击确定：</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/5.jpg" alt></p><p>点击ok之后，我们打开我们的国外目标网站，抓包测试一下：</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/如何抓取国外网站、app的包\7.jpg" alt="图片"></p><p>如图所示我们已经可以抓到包了</p><p><strong>2、接下来我们测试抓取手机端的数据包：</strong></p><p>手机设置好代理之后</p><p>我们查询一下ip，如图所示</p><p><img src="/2021/06/10/%E5%A6%82%E4%BD%95%E6%8A%93%E5%8F%96%E5%9B%BD%E5%A4%96%E7%BD%91%E7%AB%99%E3%80%81app%E7%9A%84%E5%8C%85/6.jpg" alt></p><p>ok，接下来我么就可以抓取手机的app了</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;前期准备：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  配置好的Charles抓包工具，（可以抓正常国内的APP端和网页端的包）&lt;/p&gt;
&lt;p&gt;  设置好的vpn，（可以访问国外的网站）&lt;/p&gt;
    
    </summary>
    
    
      <category term="抓包" scheme="http://yoursite.com/categories/%E6%8A%93%E5%8C%85/"/>
    
    
      <category term="抓包，" scheme="http://yoursite.com/tags/%E6%8A%93%E5%8C%85%EF%BC%8C/"/>
    
  </entry>
  
  <entry>
    <title>python抽象类原理以及编写</title>
    <link href="http://yoursite.com/2021/06/09/%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%8E%9F%E7%90%86%E4%BB%A5%E5%8F%8A%E7%BC%96%E5%86%99/"/>
    <id>http://yoursite.com/2021/06/09/%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%8E%9F%E7%90%86%E4%BB%A5%E5%8F%8A%E7%BC%96%E5%86%99/</id>
    <published>2021-06-09T14:36:29.000Z</published>
    <updated>2021-06-09T14:41:41.246Z</updated>
    
    <content type="html"><![CDATA[<p><strong>前言：</strong></p><p>好久没写文章了，今天来给大家更新一篇，最近会陆续整理，发出一下以前做的笔记</p><a id="more"></a><p><strong>1.抽象类概念</strong></p><p>抽象类是一个特殊的类，只能被继承，不能实例化</p><p><strong>2.为什么要有抽象类</strong></p><p>其实在未接触抽象类概念时，我们可以构造香蕉、苹果、梨之类的类，然后让它们继承水果这个的基类，水果的基类包含一个eat函数。</p><p>但是你有没有想过，我们可以将香蕉、苹果、梨实例化，去吃香蕉、苹果、梨。但是我们却不能将水果实例化，因为我们无法吃到叫水果的这个东西。</p><p>所以抽象类中只能有抽象方法（没有实现功能），该类不能被实例化，只能被继承，且子类必须实现抽象方法。</p><p><strong>3.抽象类的作用</strong></p><p>在不同的模块中通过抽象基类来调用，可以用最精简的方式展示出代码之间的逻辑关系，让模块之间的依赖清晰简单。</p><p>抽象类的编程，让每个人可以关注当前抽象类的方法和描述，而不需要考虑过多的实现细节，这对协同开发有很大意义，也让代码可读性更高。</p><p>Python 自带的abc模块用于实现抽象类相关的定义和操作。</p><p>我们通过一个简单的例子来说明，如何在 Python 中实现抽象类：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span><span class="params">(ABC)</span>:</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dance</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我正在跳舞'</span>)</span><br></pre></td></tr></table></figure><p>从abc模块导入ABC类，和abstractmethod抽象方法装饰器。基于ABC类可以实现一个抽象类。通过@abstractmethod装饰一个方法，让它成为一个抽象方法。抽象方法在子类中必需被实现。</p><p>注意：</p><p>抽象类不能被实例化，所以我们实例化一下，可以看到这里报错了</p><p><img src="\抽象类原理以及编写\1.jpg" alt></p><p>我们再看一下，如果继承抽象类，但是没有实现其中的某个抽象方法，也会导致报错</p><p><img src="\抽象类原理以及编写\2.jpg" alt></p><p>抽象类People中的dance不是抽象方法，所以子类不需要覆盖。</p><p><strong>总结：</strong></p><p>抽象类是软件开发中一个非常重要的概念，通过定义抽象类，我们可以约定子类必需实现的方法。当我们一个类有几十上百个方法时，用抽象方法来防止子类漏掉某些方法是非常方便的做法。</p><p><strong>完整代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span><span class="params">(ABC)</span>:</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dance</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我正在跳舞'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">kid1</span><span class="params">(People)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'走路'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'吃饭'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    k = kid1()</span><br><span class="line">    k.dance()</span><br><span class="line">    k.eat()</span><br><span class="line">    k.walk()</span><br></pre></td></tr></table></figure><p><img src="\抽象类原理以及编写\3.jpg" alt></p><p>如果文章对你有用，记得分享和关注，菜鸟童靴公众号</p><p><img src="\抽象类原理以及编写\4.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;前言：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;好久没写文章了，今天来给大家更新一篇，最近会陆续整理，发出一下以前做的笔记&lt;/p&gt;
    
    </summary>
    
    
      <category term="python基础" scheme="http://yoursite.com/categories/python%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="python基础" scheme="http://yoursite.com/tags/python%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>Python进阶之闭包和作用域</title>
    <link href="http://yoursite.com/2021/06/09/Python%E8%BF%9B%E9%98%B6%E4%B9%8B%E9%97%AD%E5%8C%85%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E2%80%8B/"/>
    <id>http://yoursite.com/2021/06/09/Python%E8%BF%9B%E9%98%B6%E4%B9%8B%E9%97%AD%E5%8C%85%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E2%80%8B/</id>
    <published>2021-06-09T13:57:55.000Z</published>
    <updated>2021-06-09T14:06:57.905Z</updated>
    
    <content type="html"><![CDATA[<p><strong>前言：</strong></p><p>好久没写文章了，今天来给大家更新一篇，最近会陆续整理，发出一下以前做的笔记</p><a id="more"></a><p><strong>作用域</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">g_count = <span class="number">0</span>  <span class="comment"># 全局作用域</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    o_count = <span class="number">1</span>  <span class="comment"># 闭包函数外的函数中</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        i_count = <span class="number">2</span>  <span class="comment"># 局部作用域</span></span><br></pre></td></tr></table></figure><p>Python 中只有模块（module），类（class）以及函数（def、lambda）才会引入新的作用域，其它的代码块</p><p>（如 if/elif/else/、try/except、for/while等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问，</p><p>如下代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">    msg = <span class="string">'I am from beijing'</span></span><br><span class="line">print(msg)</span><br><span class="line">//运行结果 I am <span class="keyword">from</span> beijing</span><br></pre></td></tr></table></figure><p><strong>全局变量和局部变量</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">total = <span class="number">0</span>  <span class="comment"># 全局变量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></span><br><span class="line">    total = arg1 + arg2  <span class="comment"># total在这里是局部变量.</span></span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">print(total)<span class="comment">#函数外是全局变量total</span></span><br><span class="line">total = sum(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">print(total)<span class="comment">#局部变量total</span></span><br></pre></td></tr></table></figure><h3 id="global-和-nonlocal关键字"><a href="#global-和-nonlocal关键字" class="headerlink" title="global 和 nonlocal关键字"></a>global 和 nonlocal关键字</h3><p>当内部作用域想修改外部作用域的变量时</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># 需要使用 global 关键字声明</span></span><br><span class="line">    print(num) </span><br><span class="line">    num = <span class="number">123</span></span><br><span class="line">    print(num)</span><br><span class="line">fun1()</span><br><span class="line">print(num)</span><br><span class="line"><span class="comment">#结果</span></span><br><span class="line"><span class="comment">#1</span></span><br><span class="line"><span class="comment">#123</span></span><br><span class="line"><span class="comment">#123</span></span><br></pre></td></tr></table></figure><p>如果要修改嵌套作用域（非全局作用域）中的变量则需要 nonlocal 关键字了 ，仅读取就无所谓了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span><span class="params">(*args)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">()</span>:</span></span><br><span class="line">        ax = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">            ax += n</span><br><span class="line">        <span class="keyword">return</span> ax</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">s = lazy_sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">print(s, type(s),s(),sep=<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Output&gt;&gt;&gt;</span></span><br><span class="line">&lt;function lazy_sum.&lt;locals&gt;.sum at <span class="number">0x10768ed90</span>&gt;</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></span><br><span class="line"><span class="class">15</span></span><br></pre></td></tr></table></figure><p><strong>进入正题：</strong></p><p><strong>闭包</strong></p><p> 在函数嵌套的程序结构中，如果内层函数包含对外层函数局部变量的引用，同时外层函数的返回结果又是对内层函数的引用，这就构成了一个闭包。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span><span class="params">(*args)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">()</span>:</span></span><br><span class="line">        ax = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">            ax += n</span><br><span class="line">        <span class="keyword">return</span> ax</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">s = lazy_sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">print(s, type(s),s(),sep=<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Output&gt;&gt;&gt;</span></span><br><span class="line">&lt;function lazy_sum.&lt;locals&gt;.sum at <span class="number">0x10768ed90</span>&gt;</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></span><br><span class="line"><span class="class">15</span></span><br></pre></td></tr></table></figure><p>在上面的代码中，我们在外层函数<code>lazy_sum</code>中又嵌套了的内层函数<code>sum</code>，<code>sum</code>引用了<code>lazy_sum</code>的参数，并且<code>lazy_sum</code> 将<code>sum</code> 作为返回结果。如果是按照命令式语言的规则（如C++，C#），在执行<code>sum</code>函数时，会由于在其作用域内找不到<code>args</code>变量而出错，但是在函数式语言中，<strong>当内嵌的函数体内有引用外部作用域的变量时，将会把定义时涉及到的引用环境和函数体打包成一个整体返回</strong>，这中程序结构就是上面说的”闭包(Closure)”。所以说，闭包就是由函数及其相关的引用环境组合而成的实体，即：闭包=函数+引用环境。</p><p>从运行结果中可以看到，当调用<code>lazy_sum(*args)</code>时，返回的是内部求和函数的引用地址，当调用函数<code>sum()</code> 时，才真正计算求和的结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">s1 = lazy_sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">s2 = lazy_sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">print(s1==s2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Output&gt;&gt;&gt;</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><p>我们使 用<code>nonlocal</code> 关键字 对上面的代码进行更改一下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span><span class="params">(*args)</span>:</span></span><br><span class="line">    ax = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> ax</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">            ax += n</span><br><span class="line">        <span class="keyword">return</span> ax</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">s = lazy_sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">print(s, type(s), s(), sep=<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Output&gt;&gt;&gt;</span></span><br><span class="line">&lt;function lazy_sum.&lt;locals&gt;.sum at <span class="number">0x000001B0D80612F0</span>&gt;</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></span><br><span class="line"><span class="class">15</span></span><br></pre></td></tr></table></figure><p><strong>闭包的应用场景：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UrlTemplate</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, template)</span>:</span></span><br><span class="line">        self.template = template</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openr</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.template.format_map(kwargs)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面的类可以被一个更简单的函数代替</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">url_template</span><span class="params">(template)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openr</span><span class="params">(**kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> template.format_map(kwargs)</span><br><span class="line">    <span class="keyword">return</span> openr</span><br><span class="line"></span><br><span class="line">root_url = url_template(<span class="string">'https://www.jianshu.com/search?q=&#123;name&#125;&amp;page=&#123;page&#125;&amp;type=&#123;type&#125;'</span>)</span><br><span class="line"></span><br><span class="line">print(root_url(name=<span class="string">'sss'</span>, page=<span class="string">'1'</span>, type=<span class="string">'note'</span>))</span><br></pre></td></tr></table></figure><p><strong>总结</strong></p><p>使用一个内部函数或者闭包的方案通常会更优雅一些。简单来讲，一个闭包就是一个函数，只不过在函数内部带上了一个额外的变量环境。闭包关键特点就是它会记住自己被定义时的环境。因此，在我们的解决方案中，opener() 函数记住了template参数的值，并在接下来的调用中使用它。任何时候只要碰到需要给某个函数增加额外的状态信息的问题，都可以考虑使用闭包。相比将函数转换成一个类而言，闭包通常是一种更加简洁和优雅的方案。</p><p><strong><em>参考链接：\</em></strong></p><p><em><a href="https://www.jianshu.com/p/77d78d84a69c" target="_blank" rel="noopener">https://www.jianshu.com/p/77d78d84a69c</a></em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;前言：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;好久没写文章了，今天来给大家更新一篇，最近会陆续整理，发出一下以前做的笔记&lt;/p&gt;
    
    </summary>
    
    
      <category term="python基础" scheme="http://yoursite.com/categories/python%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="python基础" scheme="http://yoursite.com/tags/python%E5%9F%BA%E7%A1%80/"/>
    
      <category term="面试集锦" scheme="http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
  </entry>
  
  <entry>
    <title>Hook框架xposed的简单demo</title>
    <link href="http://yoursite.com/2021/06/07/Hook%E6%A1%86%E6%9E%B6xposed%E7%9A%84%E7%AE%80%E5%8D%95demo/"/>
    <id>http://yoursite.com/2021/06/07/Hook%E6%A1%86%E6%9E%B6xposed%E7%9A%84%E7%AE%80%E5%8D%95demo/</id>
    <published>2021-06-07T15:55:13.000Z</published>
    <updated>2021-06-12T10:24:06.889Z</updated>
    
    <content type="html"><![CDATA[<p>简介：Xposed框架是一款可以在不修改APK的情况下影响程序运行的框架服务，通过替换/system/bin/app_process程序控制zygote进程，使得app_process在启动过程中会加载XposedBridge.jar这个jar包，从而完成对Zygote进程及其创建的虚拟机的劫持。<br>Github地址：<a href="https://github.com/rovo89/Xposed" target="_blank" rel="noopener">https://github.com/rovo89/Xposed</a></p><a id="more"></a><h4 id="1、编写hook的app-例子："><a href="#1、编写hook的app-例子：" class="headerlink" title="1、编写hook的app 例子："></a>1、编写hook的app 例子：</h4><h5 id="（1）-建立一个空工程，编写一个登陆界面，用自定义的一个方法"><a href="#（1）-建立一个空工程，编写一个登陆界面，用自定义的一个方法" class="headerlink" title="（1）.建立一个空工程，编写一个登陆界面，用自定义的一个方法"></a>（1）.建立一个空工程，编写一个登陆界面，用自定义的一个方法</h5><p><img src="/2021/06/07/Hook%E6%A1%86%E6%9E%B6xposed%E7%9A%84%E7%AE%80%E5%8D%95demo/3.png" alt></p><p><strong>代码如下</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;EditText</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;et1&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:layout_marginStart&#x3D;&quot;24dp&quot;</span><br><span class="line">       android:layout_marginTop&#x3D;&quot;96dp&quot;</span><br><span class="line">       android:layout_marginEnd&#x3D;&quot;24dp&quot;</span><br><span class="line">       android:hint&#x3D;&quot;zhanghao&quot;</span><br><span class="line">       android:inputType&#x3D;&quot;textEmailAddress&quot;</span><br><span class="line">       android:selectAllOnFocus&#x3D;&quot;true&quot;</span><br><span class="line">       app:layout_constraintEnd_toEndOf&#x3D;&quot;parent&quot;</span><br><span class="line">       app:layout_constraintStart_toStartOf&#x3D;&quot;parent&quot;</span><br><span class="line">       app:layout_constraintTop_toTopOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br><span class="line">   &lt;EditText</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;et2&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:layout_marginStart&#x3D;&quot;24dp&quot;</span><br><span class="line">       android:layout_marginTop&#x3D;&quot;8dp&quot;</span><br><span class="line">       android:layout_marginEnd&#x3D;&quot;24dp&quot;</span><br><span class="line">       android:hint&#x3D;&quot;Password&quot;</span><br><span class="line">       android:imeOptions&#x3D;&quot;actionDone&quot;</span><br><span class="line">       android:inputType&#x3D;&quot;textPassword&quot;</span><br><span class="line">       android:selectAllOnFocus&#x3D;&quot;true&quot;</span><br><span class="line">       app:layout_constraintEnd_toEndOf&#x3D;&quot;parent&quot;</span><br><span class="line">       app:layout_constraintStart_toStartOf&#x3D;&quot;parent&quot;</span><br><span class="line">       app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;et1&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:onClick&#x3D;&quot;my_onClick&quot;</span><br><span class="line">       android:text&#x3D;&quot;登陆&quot;</span><br><span class="line">       android:textSize&#x3D;&quot;26dp&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure><h5 id="（2）MainActivity中添加"><a href="#（2）MainActivity中添加" class="headerlink" title="（2）MainActivity中添加"></a>（2）MainActivity中添加</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.hookdemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">my_onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        EditText editText = (EditText) findViewById(R.id.et1);</span><br><span class="line">        EditText editText1 = (EditText) findViewById(R.id.et2);</span><br><span class="line">        String string = editText.getText().toString();</span><br><span class="line">        String string1 = editText1.getText().toString();</span><br><span class="line">        <span class="keyword">if</span>(CheckRegister(string,string1))&#123;</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"登陆成功"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Toast.makeText(MainActivity.<span class="keyword">this</span>,<span class="string">"登陆失败"</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">CheckRegister</span><span class="params">(String string, String string1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> string.equals(string1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果，两个输入框输入相同时 提示登陆成功，不同时 提示登陆失败</p><h4 id="2、hook准备，新建项目，引入xposed-jar包"><a href="#2、hook准备，新建项目，引入xposed-jar包" class="headerlink" title="2、hook准备，新建项目，引入xposed  jar包"></a>2、hook准备，新建项目，引入xposed  jar包</h4><p><img src="/2021/06/07/Hook%E6%A1%86%E6%9E%B6xposed%E7%9A%84%E7%AE%80%E5%8D%95demo/2.png" alt></p><h4 id="3、搞定XposedBridgeApi-xx-jar-与-build-gradle，"><a href="#3、搞定XposedBridgeApi-xx-jar-与-build-gradle，" class="headerlink" title="3、搞定XposedBridgeApi-xx.jar 与 build.gradle，"></a><strong>3、搞定XposedBridgeApi-xx.jar 与 build.gradle，</strong></h4><p>在 “项目名称/app/src/main/”目录下找到build.gradle，</p><p>在图示位置加上：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">jcenter()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以及</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compileOnly &#39;de.robv.android.xposed:api:82&#39;</span><br><span class="line"></span><br><span class="line">compileOnly &#39;de.robv.android.xposed:api:82:sources&#39;</span><br></pre></td></tr></table></figure><p>这句代码是告诉AndroidStuido使用jcenter作为代码仓库，从这个仓库里远程寻找 de.robv.android.xposed:api:82 这个API。</p><p>写完之后， build.gradle会提示文件已经修改，是否同步。点击 “sync now”，同步即可：</p><h4 id="4-声明主入口类路径"><a href="#4-声明主入口类路径" class="headerlink" title="4. 声明主入口类路径"></a>4. 声明主入口类路径</h4><p>需要在 main 文件夹下建立 assets 文件夹中新建一个 xposed_init 的文件，并在其中声明主入口类</p><p><img src="/2021/06/07/Hook%E6%A1%86%E6%9E%B6xposed%E7%9A%84%E7%AE%80%E5%8D%95demo/1.png" alt></p><h4 id="5、创建hook代码"><a href="#5、创建hook代码" class="headerlink" title="5、创建hook代码"></a>5、创建hook代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ceshi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.IXposedHookLoadPackage;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.XC_MethodHook;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.XposedBridge;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.XposedHelpers;</span><br><span class="line"><span class="keyword">import</span> de.robv.android.xposed.callbacks.XC_LoadPackage;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by 18459 on 2016/6/27.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> <span class="keyword">implements</span> <span class="title">IXposedHookLoadPackage</span></span>&#123;</span><br><span class="line">    <span class="comment">//被HOOK的程序的包名和类名</span></span><br><span class="line">    String packName = <span class="string">"com.example.hookdemo"</span>;</span><br><span class="line">    String className = <span class="string">"com.example.hookdemo.MainActivity"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleLoadPackage</span><span class="params">(XC_LoadPackage.LoadPackageParam loadPackageParam)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!loadPackageParam.packageName.equals(packName))</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//打印日志加载的包名</span></span><br><span class="line">        XposedBridge.log(<span class="string">"Loaded app: "</span> + loadPackageParam.packageName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// replaceHookedMethod 替换方法</span></span><br><span class="line">        <span class="comment">// beforeHookedMethod 方法前执行</span></span><br><span class="line">        <span class="comment">// afterHookedMethod 方法后执行</span></span><br><span class="line">        <span class="comment">// 处理是的情况</span></span><br><span class="line">        <span class="comment">// 找到对应类的方法，进行hook，hook的方式有两种</span></span><br><span class="line">        XposedHelpers.findAndHookMethod(className,     <span class="comment">// 类名</span></span><br><span class="line">                loadPackageParam.classLoader, <span class="comment">// 类加载器</span></span><br><span class="line">                <span class="string">"CheckRegister"</span>, <span class="comment">// 方法名</span></span><br><span class="line">                String<span class="class">.<span class="keyword">class</span>,   // 参数1</span></span><br><span class="line"><span class="class">                <span class="title">String</span>.<span class="title">class</span>,   // 参数2</span></span><br><span class="line"><span class="class">                <span class="title">new</span> <span class="title">XC_MethodHook</span>() </span>&#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">beforeHookedMethod</span><span class="params">(MethodHookParam param)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        <span class="keyword">super</span>.beforeHookedMethod(param);</span><br><span class="line">                        XposedBridge.log(<span class="string">"beforeHookedMethod"</span>);</span><br><span class="line">                        Log.d(<span class="string">"xposedplugin"</span>,(String) param.args[<span class="number">0</span>]);</span><br><span class="line">                        Log.d(<span class="string">"xposedplugin"</span>, (String) param.args[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">                        XposedBridge.log(<span class="string">"hook前账号"</span>+(String) param.args[<span class="number">0</span>]);</span><br><span class="line">                        XposedBridge.log(<span class="string">"hook前密码"</span>+(String) param.args[<span class="number">1</span>]);</span><br><span class="line">                        <span class="comment">//将两个参数改为相等</span></span><br><span class="line">                        param.args[<span class="number">0</span>] = <span class="string">"123"</span>;</span><br><span class="line">                        param.args[<span class="number">1</span>] = <span class="string">"123"</span>;</span><br><span class="line"></span><br><span class="line">                        XposedBridge.log(<span class="string">"hook后账号"</span>+(String) param.args[<span class="number">0</span>]);</span><br><span class="line">                        XposedBridge.log(<span class="string">"hook后密码"</span>+(String) param.args[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//这样设置函数的返回值</span></span><br><span class="line">                        param.setResult(<span class="keyword">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="comment">//这个hook方法之后有啥用还不知道</span></span><br><span class="line">                    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterHookedMethod</span><span class="params">(MethodHookParam param)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                        <span class="keyword">super</span>.afterHookedMethod(param);</span><br><span class="line">                        XposedBridge.log(<span class="string">"afterHookedMethod"</span>);</span><br><span class="line"></span><br><span class="line">                        Log.d(<span class="string">"xposedplugin"</span>, (String) param.args[<span class="number">0</span>]);</span><br><span class="line">                        Log.d(<span class="string">"xposedplugin"</span>, (String) param.args[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6、生成apk-安装"><a href="#6、生成apk-安装" class="headerlink" title="6、生成apk 安装"></a>6、生成apk 安装</h4><h4 id="7、apk导入xpose模块，重启手机"><a href="#7、apk导入xpose模块，重启手机" class="headerlink" title="7、apk导入xpose模块，重启手机"></a>7、apk导入xpose模块，重启手机</h4><p>​    </p><h4 id="8、结果演示"><a href="#8、结果演示" class="headerlink" title="8、结果演示"></a>8、结果演示</h4><p><img src="/2021/06/07/Hook%E6%A1%86%E6%9E%B6xposed%E7%9A%84%E7%AE%80%E5%8D%95demo/1.jpg" style="zoom: 25%;"></p><p>xpose日志</p><p>I/Xposed ( 3570): Found Xposed class ‘de/robv/android/xposed/XposedBridge’, now initializing<br>06-12 18:10:58.280 I/Xposed ( 3570): Loading modules from /data/app/com.example.ceshi-1/base.apk<br>06-12 18:11:02.882 I/Xposed ( 3570):  Loading class com.example.ceshi.Main<br>06-12 18:11:45.428 I/Xposed ( 8549): Loaded app: com.example.hookdemo<br>06-12 18:11:53.710 I/Xposed ( 8549): beforeHookedMethod<br>06-12 18:11:53.723 I/Xposed ( 8549): hook前账号ddddd<br>06-12 18:11:53.723 I/Xposed ( 8549): hook前密码jj<br>06-12 18:11:53.726 I/Xposed ( 8549): hook后账号123<br>06-12 18:11:53.726 I/Xposed ( 8549): hook后密码123</p><p><strong>参考链接：</strong></p><p>1、###### Hook框架xposed的简单demo</p><p><a href="https://blog.csdn.net/coc_k/article/details/52584059" target="_blank" rel="noopener">https://blog.csdn.net/coc_k/article/details/52584059</a></p><p>2、###### Using the Xposed Framework API</p><p><a href="https://github.com/rovo89/XposedBridge/wiki/Using-the-Xposed-Framework-API" target="_blank" rel="noopener">https://github.com/rovo89/XposedBridge/wiki/Using-the-Xposed-Framework-API</a></p><p><a href="https://github.com/rovo89/XposedBridge/wiki/Development-tutorial" target="_blank" rel="noopener">https://github.com/rovo89/XposedBridge/wiki/Development-tutorial</a><br>3、Xposed之Hook方法笔记<br><a href="https://www.jianshu.com/p/c513a2289db0" target="_blank" rel="noopener">https://www.jianshu.com/p/c513a2289db0</a><br>4、关于XposedHook的实践<br><a href="https://www.jianshu.com/p/4e474495865e" target="_blank" rel="noopener">https://www.jianshu.com/p/4e474495865e</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简介：Xposed框架是一款可以在不修改APK的情况下影响程序运行的框架服务，通过替换/system/bin/app_process程序控制zygote进程，使得app_process在启动过程中会加载XposedBridge.jar这个jar包，从而完成对Zygote进程及其创建的虚拟机的劫持。&lt;br&gt;Github地址：&lt;a href=&quot;https://github.com/rovo89/Xposed&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/rovo89/Xposed&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="逆向，AndroidStudio" scheme="http://yoursite.com/tags/%E9%80%86%E5%90%91%EF%BC%8CAndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio使用USB真机调试教程</title>
    <link href="http://yoursite.com/2021/06/07/AndroidStudio%E4%BD%BF%E7%94%A8USB%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"/>
    <id>http://yoursite.com/2021/06/07/AndroidStudio%E4%BD%BF%E7%94%A8USB%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/</id>
    <published>2021-06-07T14:34:00.000Z</published>
    <updated>2021-06-07T15:56:30.041Z</updated>
    
    <content type="html"><![CDATA[<p>Android开发者第一步学习的应该就是真机调试了。但是很多初次接触android studio的同学还是不知道如何用真机调试，今天我就给大家写一个教程，希望可以帮到需要的人。</p><a id="more"></a><h2 id="一、真机调试"><a href="#一、真机调试" class="headerlink" title="一、真机调试"></a>一、真机调试</h2><p>   1.先用usb线把你的测试手机连接到你的电脑上，并且安装驱动</p><p>   2.安装好驱动后就可以在电脑上读取手机的文件。接下来就是设置测试手机（寻找开发者选项）。</p><p>​    1）点击测试机“设置“，在设置中，寻找开发者选项，如果没有开发者选项，按接下来的步骤操作：找到关于手机，点击关于手机。然后找到“版本号”（小米手机是MIUI版本），点击几次版本号(最多5次)，系统即提示“您现在处于开发者模式”。注：不同手机提示可能不同。然后返回设置就会找到开发者选项。</p><pre><code> 2）然后在设置中找到“安全性（部分手机：系统安全）”，点击进入。找到“未知来源”，点击后会弹出系统提示，点击确认</code></pre><p>​     3）点击开发者选项，点击启用，会弹出一个系统提示，点击确认。然后再勾选USB调试，系统又会弹出提示，继续点击确认。</p><p>​    3.接下来设置android studio。打开android studio，在工具栏中找到，app选项，点击会弹出 Edit Configurations..选项，点击进入，然后在设置页面中找到  Deploymeng target Options下的Target选项，(新版可能找不到，可直接点击运行)，然后选择为USB Device。然后点击OK。至此咱就已经基本设置好了。可以进行真机测试了。</p><p> 结果如图所示：</p><p><img src="/2021/06/07/AndroidStudio%E4%BD%BF%E7%94%A8USB%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/1.png" style="zoom: 50%;"></p><h2 id="二、Android应用各部分说明"><a href="#二、Android应用各部分说明" class="headerlink" title="二、Android应用各部分说明"></a>二、Android应用各部分说明</h2><p><strong>（1）MainActivity.java文件</strong><br>主要活动代码，实际的应用程序文件，将被转化为Dalvik可执行文件并运行。R.layout.activity_main 引用res/layout/activity_main.xml文件。</p><p>onCreate()  活动被加载之后众多被调用的方法之一。</p><p><strong>（2）AndroidManifest.xml文件</strong></p><p>AndroidManifest.xml文件是整个应用程序的信息描述文件，定义了应用程序中包含的Activity,Service,Content provider和BroadcastReceiver组件信息。每个应用程序在根目录下必须包含一个AndroidManifest.xml文件，且文件名不能修改。在AndroidManifest.xml文件中，首先看到是的<manifest>节点，它是整个应用程序的基本属性，涵盖了默认进程名字，应用程序标识，安装位置，对系统的要求以及应用程序的版本等。</manifest></p><p>android:icon是普通图标。</p><p>android:roundIcon是圆形图标。</p><p>android:label属性指定应用的名称。</p><p>android:name属性指定一个Activity类子类的全名。</p><p>意图过滤器的action被命名为android.intent.action.MAIN，表明这个活动被用做应用程序的入口。</p><p>意图过滤器的category被命名为android.intent.category.LAUNCHER，表明应用程序可以通过设备启动器的图标来启动。</p><p>@string指的是strings.xml，因此@string/app_name指的是定义在strings.xml中的app_name，这里实际为”demo”。</p><p><strong>（3）activity_main.xml文件</strong><br>activity_main.xml 我们将频繁修改这个文件来改变应用程序的布局。</p><p>TextView是一个用于构建用户图形界面的Android控件。</p><p>它包含有许多不同的属性，诸如android:layout_width, android:layout_height等用来设置它的宽度和高度等。</p><p>这里我们给它显示一句话“御风而上，神游天下!”，并且字体颜色为红色，引用自strings.xml文件。</p><h2 id="三、建立一个空工程，编写获取序列号的简单例子"><a href="#三、建立一个空工程，编写获取序列号的简单例子" class="headerlink" title="三、建立一个空工程，编写获取序列号的简单例子"></a>三、建立一个空工程，编写获取序列号的简单例子</h2><p><strong>1.获取手机状态需要设置权限</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span>=<span class="string">"com.example.demoimei"</span>&gt;</span><br><span class="line">  &lt;uses-permission android:name="android.permission.READ_PHONE_STATE"&gt;&lt;/uses-permission&gt;</span><br><span class="line">  &lt;application</span><br></pre></td></tr></table></figure><p><strong>2.编写布局文件</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView</span><br><span class="line">    android:id=<span class="string">"@+id/tv1"</span></span><br><span class="line">    android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:text=<span class="string">"Hello World!"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=<span class="string">"@+id/tv2"</span></span><br><span class="line">    android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:text=<span class="string">"Hello World!"</span> /&gt;</span><br></pre></td></tr></table></figure><p><strong>3、编写主 Activity 类中的 onCreate 函数</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cockroach.hook_object;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.telephony.TelephonyManager;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    </span><br><span class="line">        TextView tv1 = (TextView) findViewById(R.id.tv1);</span><br><span class="line">        TextView tv2 = (TextView) findViewById(R.id.tv2);</span><br><span class="line">        TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);</span><br><span class="line">        tv1.setText(<span class="string">"imei:"</span> + tm.getDeviceId());</span><br><span class="line">        tv2.setText(<span class="string">"imsi:"</span> + tm.getSubscriberId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果出现闪退问题，报错</p><p> java.lang.SecurityException: getDeviceId: Neither user 10226 nor current process has android.permis</p><p>这可能是手机设置的问题，我手机的 应用程序-&gt; 授予权限就OK了</p><p><strong>运行结果如下：</strong></p><p><img src="/2021/06/07/AndroidStudio%E4%BD%BF%E7%94%A8USB%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/2.jpg" style="zoom: 50%;"></p><p>这就是我们的等会要hook的apk程序，下面编写xposed插件</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Android开发者第一步学习的应该就是真机调试了。但是很多初次接触android studio的同学还是不知道如何用真机调试，今天我就给大家写一个教程，希望可以帮到需要的人。&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="逆向，AndroidStudio" scheme="http://yoursite.com/tags/%E9%80%86%E5%90%91%EF%BC%8CAndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>生成器中的return有什么作用</title>
    <link href="http://yoursite.com/2021/06/06/%E7%94%9F%E6%88%90%E5%99%A8%E4%B8%AD%E7%9A%84return%E6%9C%89%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8/"/>
    <id>http://yoursite.com/2021/06/06/%E7%94%9F%E6%88%90%E5%99%A8%E4%B8%AD%E7%9A%84return%E6%9C%89%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8/</id>
    <published>2021-06-06T10:46:50.000Z</published>
    <updated>2021-06-06T11:16:32.036Z</updated>
    
    <content type="html"><![CDATA[<p>生成器中的return有什么作用</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_data</span><span class="params">(num)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> num</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    res = generate_data(num=<span class="number">12</span>)</span><br><span class="line">    print(res, type(res))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">        print(i, type(i))</span><br></pre></td></tr></table></figure><p><strong>运行结果：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;generator object generate_data at 0x000002279C741750&gt; &lt;class &#39;generator&#39;&gt;</span><br><span class="line">0 &lt;class &#39;int&#39;&gt;</span><br><span class="line">1 &lt;class &#39;int&#39;&gt;</span><br><span class="line">2 &lt;class &#39;int&#39;&gt;</span><br><span class="line">3 &lt;class &#39;int&#39;&gt;</span><br><span class="line">4 &lt;class &#39;int&#39;&gt;</span><br><span class="line">5 &lt;class &#39;int&#39;&gt;</span><br><span class="line">6 &lt;class &#39;int&#39;&gt;</span><br><span class="line">7 &lt;class &#39;int&#39;&gt;</span><br><span class="line">8 &lt;class &#39;int&#39;&gt;</span><br><span class="line">9 &lt;class &#39;int&#39;&gt;</span><br><span class="line">10 &lt;class &#39;int&#39;&gt;</span><br><span class="line">11 &lt;class &#39;int&#39;&gt;</span><br></pre></td></tr></table></figure><p><strong>今天的重点，当num值小于10时：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">res = generate_data(num=<span class="number">5</span>)</span><br><span class="line">   print(res, type(res))</span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">       print(i, type(i))</span><br></pre></td></tr></table></figure><p><strong>运行结果：</strong></p><p><generator object generate_data at 0x00000282b21e1750> <class 'generator'></class></generator></p><p>并没有返回5这个值,但是代码也没有报错，通过印结果，这说明返回的res 也是生成器</p><p><strong>带着疑问，我们进行搜索</strong></p><p><a href="https://stackoverflow.com/questions/16780002/return-in-generator-together-with-yield-in-python-3-3" target="_blank" rel="noopener">https://stackoverflow.com/questions/16780002/return-in-generator-together-with-yield-in-python-3-3</a></p><p><strong>这时候我们明白了：</strong></p><p>return 在生成器中，表示生成器运行完成了，可以结束了。然后生成器会抛出一个StopIteration的异常。而for循环能够检测到这个异常，于是结束循环。所以当我们传入的参数为5的时候，生成器直接运行到了return，于是它直接就抛出StopIteration，于是for 循环检测到这个异常就结束了。<br> 在生成器里面的return只是一个结束标志，它不会把后面写的值返回给调用者。这跟函数里面的return语句是不一样的.</p><p><strong>我们验证一下：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def f():</span><br><span class="line">    return 3</span><br><span class="line">    yield 2</span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    x &#x3D; f()</span><br><span class="line">    print(x.__next__())</span><br></pre></td></tr></table></figure><p><strong>运行结果：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;E:&#x2F;workerspace&#x2F;demo&#x2F;a.py&quot;, line 14, in &lt;module&gt;</span><br><span class="line">    print(x.__next__())</span><br><span class="line">StopIteration: 3</span><br></pre></td></tr></table></figure><p>果真如此</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;生成器中的return有什么作用&lt;/p&gt;
    
    </summary>
    
    
      <category term="python基础" scheme="http://yoursite.com/categories/python%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Python基础" scheme="http://yoursite.com/tags/Python%E5%9F%BA%E7%A1%80/"/>
    
      <category term="生成器" scheme="http://yoursite.com/tags/%E7%94%9F%E6%88%90%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>xposed-hook原理</title>
    <link href="http://yoursite.com/2021/06/06/xposed-hook%E5%8E%9F%E7%90%86/"/>
    <id>http://yoursite.com/2021/06/06/xposed-hook%E5%8E%9F%E7%90%86/</id>
    <published>2021-06-06T10:24:05.000Z</published>
    <updated>2021-06-12T14:14:24.986Z</updated>
    
    <content type="html"><![CDATA[<p>xposed hook 原理介绍</p><a id="more"></a><p><strong>1、xposed工作原理：</strong></p><p>Android基于Linux，第一个启动的进程自然是<code>init进程</code>，该进程会启动所有Android进程的父进程——<code>Zygote(孵化)进程</code>，该进程的启动配置在<code>/init.rc</code>脚本中，而Zygote进程对应的执行文件是<code>/system/bin/app_process</code>，该文件完成类库的加载以及一些函数的调用工作。在Zygote进程创建后，再fork出SystemServer进程和其他进程。而Xposed Framework呢，就是<strong>用自己实现的app_process替换掉了系统原本提供的app_process</strong>，加载一个额外的jar包，然后入口从原来的<code>com.android.internal.osZygoteInit.main()</code>被替换成了<code>de.robv.android.xposed.XposedBridge.main()</code>，然后<strong>创建的Zygote进程就变成Hook的Zygote进程了</strong>，而后面Fork出来的进程也是被Hook过的。这个Jar包在<code>/data/data/de.rbov.android.xposed.installer/bin/XposedBridge.jar</code>。</p><p>「拦截」。Xposed 通过劫持 Android 系统的 zygote 进程来加载自定义功能，这就像是半路截杀，在应用运行之前就已经将我们需要的自定义内容强加在了系统进程当中。</p><p><strong>2、Android 系统的Zygote初始化过程</strong></p><p><strong>参考链接：</strong><a href="https://www.jianshu.com/p/2303e7efb956" target="_blank" rel="noopener">https://www.jianshu.com/p/2303e7efb956</a></p><p><strong>3、xposed拦截流程：</strong></p><ul><li>startVM() 启动虚拟机并且初始化</li><li>startReg() 注册一些JNI的方法</li><li>start() 启动Zygote，依次执行 startVM()-&gt;startReg()-&gt;callMain()</li><li>callMain() 通过反射调用传入的className对象的main函数，如在init.cpp函数里面传入的ZygoteInit对象和RuntimeInit对象，调用callMain方法就会调用对应的main方法。</li></ul><p><strong>也就是说在安卓系统启动的时候，在执行callmain()这个函数的时候，我们就把我们的自定义的一些模块注入到，系统进程中了。</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;xposed hook 原理介绍&lt;/p&gt;
    
    </summary>
    
    
      <category term="逆向" scheme="http://yoursite.com/categories/%E9%80%86%E5%90%91/"/>
    
    
      <category term="Hook" scheme="http://yoursite.com/tags/Hook/"/>
    
      <category term="frida" scheme="http://yoursite.com/tags/frida/"/>
    
      <category term="逆向" scheme="http://yoursite.com/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>你应该要了解的https</title>
    <link href="http://yoursite.com/2021/06/06/%E4%BD%A0%E5%BA%94%E8%AF%A5%E8%A6%81%E4%BA%86%E8%A7%A3%E7%9A%84https/"/>
    <id>http://yoursite.com/2021/06/06/%E4%BD%A0%E5%BA%94%E8%AF%A5%E8%A6%81%E4%BA%86%E8%A7%A3%E7%9A%84https/</id>
    <published>2021-06-06T09:35:17.000Z</published>
    <updated>2021-06-14T13:07:39.234Z</updated>
    
    <content type="html"><![CDATA[<p>近几年，互联网发生着翻天覆地的变化，尤其是我们一直习以为常的HTTP协议，在逐渐的被HTTPS协议所取代，在浏览器、搜索引擎、CA机构、大型互联网企业的共同促进下，互联网迎来了“HTTPS加密时代”，HTTPS将在未来的几年内全面取代HTTP成为传输协议的主流。</p><a id="more"></a><p>读完本文，希望你能明白：</p><ul><li>HTTP通信存在什么问题</li><li>HTTPS如何改进HTTP存在那些问题</li><li>HTTPS工作原理是什么</li></ul><h2 id="一、什么是HTTPS"><a href="#一、什么是HTTPS" class="headerlink" title="一、什么是HTTPS"></a>一、什么是HTTPS</h2><p>HTTPS是在HTTP上建立SSL加密层，并对传输数据进行加密，是HTTP协议的安全版。现在它被广泛用于万维网上安全敏感的通讯，例如交易支付方面。</p><p>HTTPS主要作用是：</p><p>（1）对数据进行加密，并建立一个信息安全通道，来保证传输过程中的数据安全;</p><p>（2）对网站服务器进行真实身份认证。</p><p>我们经常会在Web的登录页面和购物结算界面等使用HTTPS通信。使用HTTPS通信时，不再用<code>http://</code>，而是改用<code>https://</code>。另外，当浏览器访问HTTPS通信有效的Web网站时，浏览器的地址栏内会出现一个带锁的标记。对HTTPS的显示方式会因浏览器的不同而有所改变。</p><p><img src="./你应该要了解的https/1.jpg" alt></p><h2 id="二、为什么需要HTTPS"><a href="#二、为什么需要HTTPS" class="headerlink" title="二、为什么需要HTTPS"></a>二、为什么需要HTTPS</h2><p>在HTTP协议中有可能存在信息窃取或身份伪装等安全问题。使用HTTPS通信机制可以有效地防止这些问题，接下来，我们先来了解下<br>HTTP协议存在的哪些问题：</p><ul><li>通信使用明文（不加密），内容可能被窃听</li></ul><p>由于HTTP本身不具备加密的功能，所以也无法做到对通信整体（使用HTTP协议通信的请求和响应的内容）进行加密。即，<strong>HTTP报文使用明文（指未经过加密的报文）方式发送</strong>。</p><p>HTTP明文协议的缺陷是导致数据泄露、数据篡改、流量劫持、钓鱼攻击等安全问题的重要原因。HTTP协议无法加密数据，所有通信数据都在网络中明文“裸奔”。通过网络的嗅探设备及一些技术手段，就可还原HTTP报文内容。</p><ul><li>无法证明报文的完整性，所以可能遭篡改</li></ul><p>所谓完整性是指信息的准确度。若无法证明其完整性，通常也就意味着无法判断信息是否准确。由于HTTP协议无法证明通信的报文完整性，因此，在请求或响应送出之后直到对方接收之前的这段时间内，即使请求或响应的内容遭到篡改，也没有办法获悉。<br>换句话说，<strong>没有任何办法确认，发出的请求/响应和接收到的请求/响应是前后相同的</strong>。</p><ul><li>不验证通信方的身份，因此有可能遭遇伪装</li></ul><p><strong>HTTP协议中的请求和响应不会对通信方进行确认</strong>。在HTTP协议通信时，由于不存在确认通信方的处理步骤，任何人都可以发起请求。另外，服务器只要接收到请求，不管对方是谁都会返回一个响应（但也仅限于发送端的IP地址和端口号没有被Web服务器设定限制访问的前提下）</p><p>HTTP协议无法验证通信方身份，任何人都可以伪造虚假服务器欺骗用户，实现“钓鱼欺诈”，用户无法察觉。</p><p>反观HTTPS协议，它比HTTP协议相比多了以下优势（下文会详细介绍）:</p><ul><li>数据隐私性：内容经过对称加密，每个连接生成一个唯一的加密密钥</li><li>数据完整性：内容传输经过完整性校验</li><li>身份认证：第三方无法伪造服务端（客户端）身份</li></ul><h2 id="三、HTTPS如何解决HTTP上述问题"><a href="#三、HTTPS如何解决HTTP上述问题" class="headerlink" title="三、HTTPS如何解决HTTP上述问题?"></a>三、HTTPS如何解决HTTP上述问题?</h2><p>HTTPS并非是应用层的一种新协议。只是HTTP通信接口部分用SSL和TLS协议代替而已。</p><p>通常，HTTP直接和TCP通信。当使用SSL时，则演变成先和SSL通信，再由SSL和TCP通信了。简言之，<strong>所谓HTTPS，其实就是身披SSL协议这层外壳的HTTP</strong>。</p><p><img src="./你应该要了解的https/2.jpg" alt></p><p>在采用SSL后，HTTP就拥有了HTTPS的加密、证书和完整性保护这些功能。也就是说<strong>HTTP加上加密处理和认证以及完整性保护后即是HTTPS</strong>。</p><p><img src="./你应该要了解的https/3.jpg" alt></p><p>HTTPS 协议的主要功能基本都依赖于 TLS/SSL 协议，TLS/SSL 的功能实现主要依赖于三类基本算法：散列函数 、对称加密和非对称加密，<strong>其利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性</strong>。</p><p><img src="./你应该要了解的https/4.jpg" alt></p><h3 id="1-解决内容可能被窃听的问题——加密"><a href="#1-解决内容可能被窃听的问题——加密" class="headerlink" title="1.解决内容可能被窃听的问题——加密"></a>1.解决内容可能被窃听的问题——加密</h3><h4 id="方法1-对称加密"><a href="#方法1-对称加密" class="headerlink" title="方法1.对称加密"></a>方法1.对称加密</h4><p>这种方式加密和解密同用一个密钥。加密和解密都会用到密钥。<strong>没有密钥就无法对密码解密，反过来说，任何人只要持有密钥就能解密了</strong>。</p><p>以对称加密方式加密时必须将密钥也发给对方。可究竟怎样才能安全地转交？在互联网上转发密钥时，如果通信被监听那么密钥就可会落人攻击者之手，同时也就失去了加密的意义。另外还得设法安全地保管接收到的密钥。</p><h4 id="方法2-非对称加密"><a href="#方法2-非对称加密" class="headerlink" title="方法2.非对称加密"></a>方法2.非对称加密</h4><p>公开密钥加密使用一对非对称的密钥。一把叫做私有密钥，另一把叫做公开密钥。顾名思义，<strong>私有密钥不能让其他任何人知道，而公开密钥则可以随意发布，任何人都可以获得</strong>。</p><p>使用公开密钥加密方式，发送密文的一方使用<strong>对方的公开密钥</strong>进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密。利用这种方式，不需要发送用来解密的私有密钥，也不必担心密钥被攻击者窃听而盗走。<br><img src="./你应该要了解的https/5.jpg" alt></p><p>非对称加密的特点是信息传输一对多，服务器只需要维持一个私钥就能够和多个客户端进行加密通信。</p><p>这种方式有以下缺点：</p><ul><li>公钥是公开的，所以针对私钥加密的信息，黑客截获后可以使用公钥进行解密，获取其中的内容；</li><li>公钥并不包含服务器的信息，使用非对称加密算法无法确保服务器身份的合法性，存在中间人攻击的风险，服务器发送给客户端的公钥可能在传送过程中被中间人截获并篡改；</li><li>使用非对称加密<strong>在数据加密解密过程需要消耗一定时间</strong>，降低了数据传输效率；</li></ul><h4 id="方法3-对称加密-非对称加密-HTTPS采用这种方式"><a href="#方法3-对称加密-非对称加密-HTTPS采用这种方式" class="headerlink" title="方法3.对称加密+非对称加密(HTTPS采用这种方式)"></a>方法3.对称加密+非对称加密(HTTPS采用这种方式)</h4><p>使用对称密钥的好处是解密的效率比较快，使用非对称密钥的好处是可以使得传输的内容不能被破解，因为就算你拦截到了数据，但是没有对应的私钥，也是不能破解内容的。就比如说你抢到了一个保险柜，但是没有保险柜的钥匙也不能打开保险柜。那我们就将对称加密与非对称加密结合起来,充分利用两者各自的优势，<strong>在交换密钥环节使用非对称加密方式，之后的建立通信交换报文阶段则使用对称加密方式</strong>。</p><p>具体做法是：<strong>发送密文的一方使用对方的公钥进行加密处理“对称的密钥”，然后对方用自己的私钥解密拿到“对称的密钥”，这样可以确保交换的密钥是安全的前提下，使用对称加密方式进行通信</strong>。所以，HTTPS采用对称加密和非对称加密两者并用的混合加密机制。</p><h3 id="2-解决报文可能遭篡改问题——数字签名"><a href="#2-解决报文可能遭篡改问题——数字签名" class="headerlink" title="2.解决报文可能遭篡改问题——数字签名"></a>2.解决报文可能遭篡改问题——数字签名</h3><p>网络传输过程中需要经过很多中间节点，虽然数据无法被解密，但可能被篡改，那如何校验数据的完整性呢？——校验数字签名。</p><p><strong>数字签名有两种功效</strong>：</p><ul><li>能确定消息确实是由发送方签名并发出来的，因为别人假冒不了发送方的签名。</li><li>数字签名能确定消息的完整性,证明数据是否未被篡改过。</li></ul><p><strong>数字签名如何生成:</strong><br><img src="./你应该要了解的https/6.jpg" alt></p><p>将一段文本先用Hash函数生成消息摘要，然后用发送者的私钥加密生成数字签名，与原文文一起传送给接收者。接下来就是接收者校验数字签名的流程了。</p><p><strong>校验数字签名流程</strong>：</p><p><img src="./你应该要了解的https/7.jpg" alt="img"></p><p>接收者只有用发送者的公钥才能解密被加密的摘要信息，然后用HASH函数对收到的原文产生一个摘要信息，与上一步得到的摘要信息对比。如果相同，则说明收到的信息是完整的，在传输过程中没有被修改，否则说明信息被修改过，因此数字签名能够验证信息的完整性。</p><p>假设消息传递在Kobe，James两人之间发生。James将消息连同数字签名一起发送给Kobe，Kobe接收到消息后，通过校验数字签名，就可以验证接收到的消息就是James发送的。当然，这个过程的前提是Kobe知道James的公钥。问题的关键的是，和消息本身一样，公钥不能在不安全的网络中直接发送给Kobe,或者说拿到的公钥如何证明是James的。</p><p>此时就需要引入了<strong>证书颁发机构</strong>（Certificate Authority，简称CA），CA数量并不多，Kobe客户端内置了所有受信任CA的证书。CA对James的公钥（和其他信息）数字签名后生成证书。</p><h3 id="3-解决通信方身份可能被伪装的问题——数字证书"><a href="#3-解决通信方身份可能被伪装的问题——数字证书" class="headerlink" title="3.解决通信方身份可能被伪装的问题——数字证书"></a>3.解决通信方身份可能被伪装的问题——数字证书</h3><p>数字证书认证机构处于客户端与服务器双方都可信赖的第三方机构的立场上。<br><img src="./你应该要了解的https/8.jpg" alt>们来介绍一下数字证书认证机构的业务流程：</p><ul><li>服务器的运营人员向第三方机构CA提交公钥、组织信息、个人信息(域名)等信息并申请认证;</li><li>CA通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等;</li><li>如信息审核通过，CA会向申请者签发认证文件-证书。证书包含以下信息：申请者公钥、申请者的组织信息和个人信息、签发机构 CA的信息、有效时间、证书序列号等信息的明文，同时包含一个签名。 其中签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA的私钥对信息摘要进行加密，密文即签名;</li><li>客户端 Client 向服务器 Server 发出请求时，Server 返回证书文件;</li><li>客户端 Client 读取证书中的相关的明文信息，采用相同的散列函数计算得到信息摘要，然后，利用对应 CA的公钥解密签名数据，对比证书的信息摘要，如果一致，则可以确认证书的合法性，即服务器的公开密钥是值得信赖的。</li><li>客户端还会验证证书相关的域名信息、有效时间等信息; 客户端会内置信任CA的证书信息(包含公钥)，如果CA不被信任，则找不到对应 CA的证书，证书也会被判定非法。</li></ul><h2 id="四、-HTTPS工作流程"><a href="#四、-HTTPS工作流程" class="headerlink" title="四、 HTTPS工作流程"></a>四、 HTTPS工作流程</h2><p><img src="./你应该要了解的https/9.jpg" alt></p><p>1.Client发起一个HTTPS（比如<code>https://juejin.im/user/5a9a9cdcf265da238b7d771c</code>）的请求，根据RFC2818的规定，Client知道需要连接Server的443（默认）端口。</p><p>2.Server把事先配置好的公钥证书（public key certificate）返回给客户端。</p><p>3.Client验证公钥证书：比如是否在有效期内，证书的用途是不是匹配Client请求的站点，是不是在CRL吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的Root证书或者Client内置的Root证书）。如果验证通过则继续，不通过则显示警告信息。</p><p>4.Client使用伪随机数生成器生成加密所使用的对称密钥，然后用证书的公钥加密这个对称密钥，发给Server。</p><p>5.Server使用自己的私钥（private key）解密这个消息，得到对称密钥。至此，Client和Server双方都持有了相同的对称密钥。</p><p>6.Server使用对称密钥加密“明文内容A”，发送给Client。</p><p>7.Client使用对称密钥解密响应的密文，得到“明文内容A”。</p><p>8.Client再次发起HTTPS的请求，使用对称密钥加密请求的“明文内容B”，然后Server使用对称密钥解密密文，得到“明文内容B”。</p><h2 id="五、HTTP-与-HTTPS-的区别"><a href="#五、HTTP-与-HTTPS-的区别" class="headerlink" title="五、HTTP 与 HTTPS 的区别"></a>五、HTTP 与 HTTPS 的区别</h2><ul><li>HTTP 是明文传输协议，HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。</li><li></li></ul><p><img src="你应该要了解的https/10.jpg" alt></p><p>关于安全性，用最简单的比喻形容两者的关系就是卡车运货，HTTP下的运货车是敞篷的，货物都是暴露的。而https则是封闭集装箱车，安全性自然提升不少。</p><ul><li>HTTPS比HTTP更加安全，对搜索引擎更友好，利于SEO,谷歌、百度优先索引HTTPS网页;</li><li>HTTPS需要用到SSL证书，而HTTP不用;</li><li>HTTPS标准端口443，HTTP标准端口80;</li><li>HTTPS基于传输层，HTTP基于应用层;</li><li>HTTPS在浏览器显示绿色安全锁，HTTP没有显示;</li></ul><h2 id="六、为何不所有的网站都使用HTTPS"><a href="#六、为何不所有的网站都使用HTTPS" class="headerlink" title="六、为何不所有的网站都使用HTTPS"></a>六、为何不所有的网站都使用HTTPS</h2><p>既然HTTPS那么安全可靠，那为何不所有的Web网站都使用HTTPS？</p><p>首先，很多人还是会觉得HTTPS实施有门槛，这个门槛在于需要权威CA颁发的SSL证书。从证书的选择、购买到部署，传统的模式下都会比较耗时耗力。</p><p>其次，HTTPS普遍认为性能消耗要大于HTTP，因为<strong>与纯文本通信相比，加密通信会消耗更多的CPU及内存资源</strong>。如果每次通信都加密，会消耗相当多的资源，平摊到一台计算机上时，能够处理的请求数量必定也会随之减少。但事实并非如此，用户可以通过性能优化、把证书部署在SLB或CDN，来解决此问题。举个实际的例子，“双十一”期间，全站HTTPS的淘宝、天猫依然保证了网站和移动端的访问、浏览、交易等操作的顺畅、平滑。通过测试发现，经过优化后的许多页面性能与HTTP持平甚至还有小幅提升，因此HTTPS经过优化之后其实并不慢。</p><p>除此之外，<strong>想要节约购买证书的开销也是原因之一</strong>。要进行HTTPS通信，证书是必不可少的。而使用的证书必须向认证机构（CA）购买。</p><p>最后是安全意识。相比国内，国外互联网行业的安全意识和技术应用相对成熟，HTTPS部署趋势是由社会、企业、政府共同去推动的。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;近几年，互联网发生着翻天覆地的变化，尤其是我们一直习以为常的HTTP协议，在逐渐的被HTTPS协议所取代，在浏览器、搜索引擎、CA机构、大型互联网企业的共同促进下，互联网迎来了“HTTPS加密时代”，HTTPS将在未来的几年内全面取代HTTP成为传输协议的主流。&lt;/p&gt;
    
    </summary>
    
    
      <category term="https,面试集锦" scheme="http://yoursite.com/categories/https-%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
    
      <category term="面试集锦" scheme="http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
      <category term="https" scheme="http://yoursite.com/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>bloomfilter</title>
    <link href="http://yoursite.com/2021/06/06/bloomfilter/"/>
    <id>http://yoursite.com/2021/06/06/bloomfilter/</id>
    <published>2021-06-06T05:01:39.000Z</published>
    <updated>2021-06-06T09:58:14.687Z</updated>
    
    <content type="html"><![CDATA[<p>布隆过滤器介绍</p><a id="more"></a><h2 id="什么是布隆过滤器"><a href="#什么是布隆过滤器" class="headerlink" title="什么是布隆过滤器"></a><strong>什么是布隆过滤器</strong></h2><p>本质上布隆过滤器是一种数据结构，比较巧妙的概率型数据结构（probabilistic data structure），特点是高效地插入和查询，可以用来告诉你 <strong>“某样东西一定不存在或者可能存在”</strong>。</p><p>相比于传统的 List、Set、Map 等数据结构，它更高效、占用空间更少，但是缺点是其返回的结果是概率性的，而不是确切的。</p><h2 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a><strong>实现原理</strong></h2><p><strong>HashMap 的问题</strong></p><p>讲述布隆过滤器的原理之前，我们先思考一下，通常你判断某个元素是否存在用的是什么？应该蛮多人回答 HashMap 吧，确实可以将值映射到 HashMap 的 Key，然后可以在 O(1) 的时间复杂度内返回结果，效率奇高。但是 HashMap 的实现也有缺点，例如存储容量占比高，考虑到负载因子的存在，通常空间是不能被用满的，而一旦你的值很多例如上亿的时候，那 HashMap 占据的内存大小就变得很可观了。</p><p>还比如说你的数据集存储在远程服务器上，本地服务接受输入，而数据集非常大不可能一次性读进内存构建 HashMap 的时候，也会存在问题。</p><p><strong>布隆过滤器数据结构</strong></p><p>布隆过滤器是一个 bit 向量或者说 bit 数组，长这样：</p><p><img src="/2021/06/06/bloomfilter/1.jpg" alt></p><p>如果我们要映射一个值到布隆过滤器中，我们需要使用<strong>多个不同的哈希函数</strong>生成<strong>多个哈希值，</strong>并对每个生成的哈希值指向的 bit 位置 1，例如针对值 “baidu” 和三个不同的哈希函数分别生成了哈希值 1、4、7，则上图转变为：</p><p><img src="/2021/06/06/bloomfilter/2.jpg" alt></p><p>Ok，我们现在再存一个值 “tencent”，如果哈希函数返回 3、4、8 的话，图继续变为：</p><p><img src="/2021/06/06/bloomfilter/3.jpg" alt></p><p>值得注意的是，4 这个 bit 位由于两个值的哈希函数都返回了这个 bit 位，因此它被覆盖了。现在我们如果想查询 “dianping” 这个值是否存在，哈希函数返回了 1、5、8三个值，结果我们发现 5 这个 bit 位上的值为 0，<strong>说明没有任何一个值映射到这个 bit 位上</strong>，因此我们可以很确定地说 “dianping” 这个值不存在。而当我们需要查询 “baidu” 这个值是否存在的话，那么哈希函数必然会返回 1、4、7，然后我们检查发现这三个 bit 位上的值均为 1，那么我们可以说 “baidu” <strong>存在了么？答案是不可以，只能是 “baidu” 这个值可能存在。</strong></p><p>这是为什么呢？答案跟简单，因为随着增加的值越来越多，被置为 1 的 bit 位也会越来越多，这样某个值 “taobao” 即使没有被存储过，但是万一哈希函数返回的三个 bit 位都被其他值置位了 1 ，那么程序还是会判断 “taobao” 这个值存在。</p><h2 id="支持删除么"><a href="#支持删除么" class="headerlink" title="支持删除么"></a>支持删除么</h2><p>感谢评论区提醒，传统的布隆过滤器并不支持删除操作。但是名为 Counting Bloom filter 的变种可以用来测试元素计数个数是否绝对小于某个阈值，它支持元素删除。可以参考文章 <a href="https://link.zhihu.com/?target=https%3A//cloud.tencent.com/developer/article/1136056">Counting Bloom Filter 的原理和实现</a></p><h2 id="如何选择哈希函数个数和布隆过滤器长度"><a href="#如何选择哈希函数个数和布隆过滤器长度" class="headerlink" title="如何选择哈希函数个数和布隆过滤器长度"></a><strong>如何选择哈希函数个数和布隆过滤器长度</strong></h2><p>很显然，过小的布隆过滤器很快所有的 bit 位均为 1，那么查询任何值都会返回“可能存在”，起不到过滤的目的了。布隆过滤器的长度会直接影响误报率，布隆过滤器越长其误报率越小。</p><p>另外，哈希函数的个数也需要权衡，个数越多则布隆过滤器 bit 位置位 1 的速度越快，且布隆过滤器的效率越低；但是如果太少的话，那我们的误报率会变高。</p><p><img src="/2021/06/06/bloomfilter/4.jpg" alt>k 为哈希函数个数，m 为布隆过滤器长度，n 为插入的元素个数，p 为误报率</p><p>如何选择适合业务的 k 和 m 值呢，这里直接贴一个公式：</p><p><img src="/2021/06/06/bloomfilter/5.png" alt></p><p>如何推导这个公式这里只是提一句，因为对于使用来说并没有太大的意义，你让一个高中生来推会推得很快。k 次哈希函数某一 bit 位未被置为 1 的概率为：</p><p><img src="/2021/06/06/bloomfilter/6.png" alt></p><p>插入n个元素后依旧为 0 的概率和为 1 的概率分别是：</p><p><img src="/2021/06/06/bloomfilter/7.png" alt></p><p>标明某个元素是否在集合中所需的 k 个位置都按照如上的方法设置为 1，但是该方法可能会使算法错误的认为某一原本不在集合中的元素却被检测为在该集合中（False Positives），该概率由以下公式确定</p><p><img src="/2021/06/06/bloomfilter/8.png" alt></p><h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a><strong>最佳实践</strong></h2><p>常见的适用常见有，利用布隆过滤器减少磁盘 IO 或者网络请求，因为一旦一个值必定不存在的话，我们可以不用进行后续昂贵的查询请求。</p><p>另外，既然你使用布隆过滤器来加速查找和判断是否存在，那么性能很低的哈希函数不是个好选择，推荐 MurmurHash、Fnv 这些。</p><p><strong>大Value拆分</strong></p><p>Redis 因其支持 setbit 和 getbit 操作，且纯内存性能高等特点，因此天然就可以作为布隆过滤器来使用。但是布隆过滤器的不当使用极易产生大 Value，增加 Redis 阻塞风险，因此生成环境中建议对体积庞大的布隆过滤器进行拆分。</p><p>拆分的形式方法多种多样，但是本质是不要将 Hash(Key) 之后的请求分散在多个节点的多个小 bitmap 上，而是应该拆分成多个小 bitmap 之后，对一个 Key 的所有哈希函数都落在这一个小 bitmap 上。</p><p><strong>参考资料：</strong></p><p><a href="https://hackernoon.com/probabilistic-data-structures-bloom-filter-5374112a7832" target="_blank" rel="noopener">https://hackernoon.com/probabilistic-data-structures-bloom-filter-5374112a7832</a></p><p><a href="https://www.jasondavies.com/bloomfilter/" target="_blank" rel="noopener">https://www.jasondavies.com/bloomfilter/</a></p><p><strong>转载</strong> ：<a href="https://zhuanlan.zhihu.com/p/43263751" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/43263751</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;布隆过滤器介绍&lt;/p&gt;
    
    </summary>
    
    
      <category term="去重" scheme="http://yoursite.com/categories/%E5%8E%BB%E9%87%8D/"/>
    
    
      <category term="去重， 面试集锦" scheme="http://yoursite.com/tags/%E5%8E%BB%E9%87%8D%EF%BC%8C-%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
  </entry>
  
  <entry>
    <title>同步和异步，进程，线程和协程之间的区别和联系</title>
    <link href="http://yoursite.com/2021/06/05/%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5%EF%BC%8C%E8%BF%9B%E7%A8%8B%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/"/>
    <id>http://yoursite.com/2021/06/05/%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5%EF%BC%8C%E8%BF%9B%E7%A8%8B%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/</id>
    <published>2021-06-05T07:49:35.000Z</published>
    <updated>2021-06-06T09:58:35.734Z</updated>
    
    <content type="html"><![CDATA[<p>同步和异步，进程，线程和协程之间的区别和联系</p><a id="more"></a><h1 id="同步和异步，进程，线程和协程之间的区别和联系"><a href="#同步和异步，进程，线程和协程之间的区别和联系" class="headerlink" title="同步和异步，进程，线程和协程之间的区别和联系"></a>同步和异步，进程，线程和协程之间的区别和联系</h1><p><strong>同步和异步、阻塞和非阻塞</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">异步： 多任务， 多个任务之间执行没有先后顺序，可以同时运行，执行的先后顺序不会有什么影响，存在的多条运行主线</span><br><span class="line">同步： 多任务， 多个任务之间执行的时候要求有先后顺序，必须一个先执行完成之后，另一个才能继续执行， 只有一个主线</span><br><span class="line">阻塞：从调用者的角度出发，如果在调用的时候，被卡住，不能再继续向下运行，需要等待，就说是阻塞</span><br><span class="line">非阻塞： 从调用者的角度出发， 如果在调用的时候，没有被卡住，能够继续向下运行，无需等待，就说是非阻塞</span><br></pre></td></tr></table></figure><p><strong>1）同步、异步</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">函数或方法被调用的时候，调用者是否得到最终的结果。</span><br><span class="line"></span><br><span class="line">直接得到最终结果的结果，就是同步调用。（打饭模型，打饭不打好不走开，直到打饭给我后才离开）</span><br><span class="line">不直接得到的最终的结果，就是异步调用。（打饭，不会一直等着，会时不时的过来看看，打完了把饭拿走，异步不保证多长时间打完了饭）</span><br></pre></td></tr></table></figure><p><strong>2）阻塞、非阻塞：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">函数或方法调用的时候，是否立即返回。</span><br><span class="line"></span><br><span class="line">立即返回就是非阻塞调用。</span><br><span class="line">不立即返回就是阻塞调用。</span><br></pre></td></tr></table></figure><p><strong>3）区别：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">同步、异步，与阻塞、非阻塞不相关。</span><br><span class="line">同步、异步强调的是结果。阻塞和非阻塞强调的是时间，是否等待。</span><br><span class="line">同步与异步区别在于：调用者是否得到了想要的最终结果。</span><br><span class="line">同步就是一直要执行到返回最终结果。异步就是直接返回了，但是返回的不是最终的结果，调用者不能通过这种调用得到结果，还要通过被调用者，使用其他方式通知调用者，来取回最终结果。</span><br><span class="line">阻塞与非阻塞的区别在于，调用者是否还能干其他的事情。</span><br><span class="line">阻塞，调用者只能干等。非阻塞，调用者可以先忙一会别的，不用一直等。</span><br></pre></td></tr></table></figure><p><strong>4）联系：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">同步阻塞：调用者阻塞，直到等到拿到最终结果。（打饭模型，什么事情也不敢，就等着打饭，打饭是结果，什么也不干，一直在等着，同步加阻塞）</span><br><span class="line">同步非阻塞：（等着打饭，但是可以玩会手机，看看电视，打饭是结果，但是不用一直在等着）</span><br><span class="line">异步阻塞：（我要打饭，你说等着较好，并没有返回饭给我，我啥事不干，就干等着饭好了叫我）</span><br><span class="line">异步非阻塞：回调的话。（我要打饭，你说等较好，并没有返回饭给我，可以在旁边看看电视，玩玩手机，饭好了叫我）</span><br></pre></td></tr></table></figure><h2 id="进程、线程和协程之间的区别和联系"><a href="#进程、线程和协程之间的区别和联系" class="headerlink" title="进程、线程和协程之间的区别和联系"></a><strong>进程、线程和协程之间的区别和联系</strong></h2><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a><strong>定义</strong></h2><p>进程: 一个运行起来的程序或者软件叫做进程，进程是操作系统分配资源的 基本单位<br>线程：指进程内的一个执行单元,也是进程内的可调度实体。<br>协程：是一种程序组件，是由子例程（过程、函数、例程、方法、子程序）的概念泛化而来的，子例程只有一个入口点且只返回一次，而协程允许多个入口点，可以在指定位置挂起和恢复执行。</p><h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>进程是资源分配的最小单位,线程是CPU调度的最小单位.<br>进程是操作系统资源分配的单位<br>线程是CPU调度的单位<br>进程切换需要的资源最大，效率很低<br>线程切换需要的资源一般，效率一般<br>协程切换需要资源很小，效率高</p><h2 id="线程与进程的区别"><a href="#线程与进程的区别" class="headerlink" title="线程与进程的区别"></a>线程与进程的区别</h2><p>同一个进程中的线程共享同一内存空间，但是进程之间是独立的。<br>同一个进程中的所有线程的数据是共享的（进程通讯），进程之间的数据是独立的。<br>对主线程的修改可能会影响其他线程的行为，但是父进程的修改（除了删除以外）不会影响其他子进程。<br>一个进程至少有一个线程<br>同一个进程的线程之间可以直接通信，但是进程之间的交流需要借助中间代理(队列)来实现<br>创建新的线程很容易，但是创建新的进程需要对父进程做一次复制。<br>一个线程可以操作同一进程的其他线程，但是进程只能操作其子进程。<br>线程启动速度快，进程启动速度慢（但是两者运行速度没有可比性）。</p><h2 id="协程与线程的比较"><a href="#协程与线程的比较" class="headerlink" title="协程与线程的比较"></a>协程与线程的比较</h2><p>一个线程可以多个协程，一个进程也可以单独拥有多个协程，这样python中则能使用多核CPU。<br>线程进程都是同步机制，而协程则是异步<br>协程能保留上一次调用时的状态，每次过程重入时，就相当于进入上一次调用的状态</p><p><strong>代码demo：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"%s准备开始吃包子啦..."</span> % name)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        new_baozi = <span class="keyword">yield</span></span><br><span class="line">        print(<span class="string">"[%s] 正在吃包子 %s"</span> % (name,new_baozi))</span><br><span class="line">        <span class="comment">#time.sleep(1)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span><span class="params">()</span>:</span></span><br><span class="line">    r = con.__next__()</span><br><span class="line">    r = con2.__next__()</span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="number">5</span>:    <span class="comment"># 生产者只做5个包子</span></span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        print(<span class="string">"\033[32;1m[producer]\033[0m做好了新包子 %s"</span> % n )</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        con.send(n)</span><br><span class="line">        con2.send(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># 定义2个消费者、1个生产者</span></span><br><span class="line">    con = consumer(<span class="string">"c1"</span>)</span><br><span class="line">    con2 = consumer(<span class="string">"c2"</span>)</span><br><span class="line">    p = producer()</span><br></pre></td></tr></table></figure><p>协程介绍： <a href="https://zhuanlan.zhihu.com/p/38528865" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/38528865</a> </p><p>参考链接 ： <a href="https://blog.csdn.net/DD18203614685/article/details/93226319" target="_blank" rel="noopener">https://blog.csdn.net/DD18203614685/article/details/93226319</a> </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;同步和异步，进程，线程和协程之间的区别和联系&lt;/p&gt;
    
    </summary>
    
    
      <category term="python基础知识" scheme="http://yoursite.com/categories/python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
    
      <category term="面试集锦" scheme="http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6/"/>
    
      <category term="python基础知识" scheme="http://yoursite.com/tags/python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>douyin-signature</title>
    <link href="http://yoursite.com/2021/05/28/douyin-signature/"/>
    <id>http://yoursite.com/2021/05/28/douyin-signature/</id>
    <published>2021-05-28T15:45:47.000Z</published>
    <updated>2021-06-06T09:58:05.183Z</updated>
    
    <content type="html"><![CDATA[<p>声明：本文只作学习研究，禁止用于非法用途，否则后果自负，如有侵权，请告知删除，谢谢！</p><p>练习网站平台：</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JXU1MjREJXU5NzYyJXU2NkI0JXU5NzMyJXU3Njg0JXU4RkQ4JXU0RTBEJXU2NjBFJXU2NjNFJXU0RTQ4</span><br></pre></td></tr></table></figure><p><strong>抓取目标：</strong></p><p>这次要分析的如何抓取指定用户发布的视频<br>开启分析之旅：</p><p>首先在手机上分享出，我们要抓取的用户</p><p><img src="/2021/05/28/douyin-signature/1.png" alt></p><p>看到这个页面之后，我抓一下包分析一下</p><p> <img src="/2021/05/28/douyin-signature/2.png" alt></p><p><strong>滑动刷新多抓两个包，进行比较，分析一下参数</strong></p><p><img src="/2021/05/28/douyin-signature/17.png" alt></p><p>max_cursor ：每次会根据，上一次的抓包结果里面有</p><p>_signature:每次是变化的，和今日头条那个差不多（预计）</p><p>dytk:这个值呢，插看原网页就有，如图所示</p><p> <img src="/2021/05/28/douyin-signature/3.png" alt></p><p>让我们瞧一瞧_signature这个参数,全局搜索参数</p><p><img src="/2021/05/28/douyin-signature/4.png" alt></p><p>进入到第一个js文件，我们发现</p><p><img src="/2021/05/28/douyin-signature/5.png" alt></p><p>继续向下搜索signature,我们看到生成的函数：</p><p><img src="/2021/05/28/douyin-signature/6.png" alt></p><p>打上断点分析一下</p><p><img src="/2021/05/28/douyin-signature/7.png" alt></p><p>我们发现仅仅需要传进去uid，我们就能生成_signature值，我们把js复制下下来进行分析，</p><p>这里有两种还原方式：</p><p>下面我阐述其中一种：</p><p>首先么搜索_bytedAcrawler。结果如图所示：</p><p><img src="/2021/05/28/douyin-signature/8.png" alt></p><p>我们进入这个函数：</p><p>接下来把这个函数复制出来：</p><p>!function(t) {<br>    if (t.<strong>M = t.</strong>M || {},<br>        !t.<strong>M.require) {<br>        var e, n, r = document.getElementsByTagName(“head”)[0], i = {}, o = {}, a = {}, u = {}, c = {}, s = {}, l = function(t, n) {<br>            if (!(t in u)) {<br>                u[t] = !0;<br>                var i = document.createElement(“script”);<br>                if (n) {<br>                    var o = setTimeout(n, e.timeout);<br>                    i.onerror = function() {<br>                        clearTimeout(o),<br>                            n()<br>                    }<br>                    ;<br>                    var a = function() {<br>                        clearTimeout(o)<br>                    };<br>                    “onload”in i ? i.onload = a : i.onreadystatechange = function() {<br>                        (“loaded” === this.readyState || “complete” === this.readyState) &amp;&amp; a()<br>                    }<br>                }<br>                return i.type = “text/javascript”,<br>                    i.src = t,<br>                    r.appendChild(i),<br>                    i<br>            }<br>        }, f = function(t, e, n) {<br>            var r = i[t] || (i[t] = []);<br>            r.push(e);<br>            var o, a = c[t] || c[t + “.js”] || {}, u = a.pkg;<br>            o = u ? s[u].url || s[u].uri : a.url || a.uri || t,<br>                l(o, n &amp;&amp; function() {<br>                    n(t)<br>                }<br>                )<br>        };<br>        n = function(t, e) {<br>            “function” != typeof e &amp;&amp; (e = arguments[2]),<br>                t = t.replace(/.js$/i, “”),<br>                o[t] = e;<br>            var n = i[t];<br>            if (n) {<br>                for (var r = 0, a = n.length; a &gt; r; r++)<br>                    n<a href>r</a>;<br>                delete i[t]<br>            }<br>        }<br>            ,<br>            e = function(t) {<br>                if (t &amp;&amp; t.splice)<br>                    return e.async.apply(this, arguments);<br>                t = e.alias(t);<br>                var n = a[t];<br>                if (n)<br>                    return n.exports;<br>                var r = o[t];<br>                if (!r)<br>                    throw “[ModJS] Cannot find module <code>&quot; + t + &quot;</code>“;<br>                n = a[t] = {<br>                    exports: {}<br>                };<br>                var i = “function” == typeof r ? r.apply(n, [e, n.exports, n]) : r;<br>                return i &amp;&amp; (n.exports = i),<br>                n.exports &amp;&amp; !n.exports[“default”] &amp;&amp; Object.defineProperty &amp;&amp; Object.isExtensible(n.exports) &amp;&amp; Object.defineProperty(n.exports, “default”, {<br>                    value: n.exports<br>                }),<br>                    n.exports<br>            }<br>            ,<br>            e.async = function(n, r, i) {<br>                function a(t) {<br>                    for (var n, r = 0, h = t.length; h &gt; r; r++) {<br>                        var p = e.alias(t[r]);<br>                        p in o ? (n = c[p] || c[p + “.js”],<br>                        n &amp;&amp; “deps”in n &amp;&amp; a(n.deps)) : p in s || (s[p] = !0,<br>                            l++,<br>                            f(p, u, i),<br>                            n = c[p] || c[p + “.js”],<br>                        n &amp;&amp; “deps”in n &amp;&amp; a(n.deps))<br>                    }<br>                }<br>                function u() {<br>                    if (0 === l—) {<br>                        for (var i = [], o = 0, a = n.length; a &gt; o; o++)<br>                            i[o] = e(n[o]);<br>                        r &amp;&amp; r.apply(t, i)<br>                    }<br>                }<br>                “string” == typeof n &amp;&amp; (n = [n]);<br>                var s = {}<br>                    , l = 0;<br>                a(n),<br>                    u()<br>            }<br>            ,<br>            e.resourceMap = function(t) {<br>                var e, n;<br>                n = t.res;<br>                for (e in n)<br>                    n.hasOwnProperty(e) &amp;&amp; (c[e] = n[e]);<br>                n = t.pkg;<br>                for (e in n)<br>                    n.hasOwnProperty(e) &amp;&amp; (s[e] = n[e])<br>            }<br>            ,<br>            e.loadJs = function(t) {<br>                l(t)<br>            }<br>            ,<br>            e.loadCss = function(t) {<br>                if (t.content) {<br>                    var e = document.createElement(“style”);<br>                    e.type = “text/css”,<br>                        e.styleSheet ? e.styleSheet.cssText = t.content : e.innerHTML = t.content,<br>                        r.appendChild(e)<br>                } else if (t.url) {<br>                    var n = document.createElement(“link”);<br>                    n.href = t.url,<br>                        n.rel = “stylesheet”,<br>                        n.type = “text/css”,<br>                        r.appendChild(n)<br>                }<br>            }<br>            ,<br>            e.alias = function(t) {<br>                return t.replace(/.js$/i, “”)<br>            }<br>            ,<br>            e.timeout = 5e3,<br>            t.</strong>M.define = n,<br>            t.__M.require = e<br>    }<br>}(this);</p><p><strong>M.define(“douyin_falcon:node_modules/byted-acrawler/dist/runtime”, function(l, e) {<br>    Function(function(l) {<br>        return ‘e(e,a,r){(b[e]||(b[e]=t(“x,y”,”x “+e+” y”)(r,a)}a(e,a,r){(k[r]||(k[r]=t(“x,y”,”new x<a href="&quot;+Array(r+1">y</a>.join(“,x[y]”)(1)+”)”)(e,a)}r(e,a,r){n,t,s={},b=s.d=r?r.d+1:0;for(s[“$”+b]=s,t=0;t<b;t)s[n="$"+t]=r[n];for(t=0,b=s=a;t<b;t)s[t]=a[t];c(e,0,s)}c(t,b,k){u(e){v[x]=e}f{g=,ting(bg)}l{try{y=c(t,b,k)}catch(e){h=e,y=l}}for(h,y,d,g,v=[],x=0;;)switch(g=){case 1:u(!)4:f5:u((e){a="0,r=e;{c=a<r;c&&u(e[a]),c}}(6:y=,u((y8:if(g=,lg,g=,y===c)b+=g;else" if(y!="=l)y9:c10:u(s(11:y=,u(+y)12:for(y=f,d=[],g=0;g<y;g)d[g]=y.charCodeAt(g)^g+y;u(String.fromCharCode.apply(null,d13:y=,h=delete" [y]14:59:u((g=")?(y=x,v.slice(x-=g,y:[])61:u([])62:g=,k[0]=65599*k[0]+k[1].charCodeAt(g)">&gt;&gt;065:h=,y=,[y]=h66:u(e(t[b],,67:y=,d=,u((g=).x===c?r(g.y,y,k):g.apply(d,y68:u(e((g=t[b])&lt;”&lt;”?(b—,f):g+g,,70:u(!1)71:n72:+f73:u(parseInt(f,3675:if(){bcase 74:g=&lt;<16>&gt;16g76:u(k[])77:y=,u([y])78:g=,u(a(v,x-=g+1,g79:g=,u(k[“$”+g])81:h=,[f]=h82:u([f])83:h=,k[]=h84:!085:void 086:u(v[x-1])88:h=,y=,h,y89:u({e{r(e.y,arguments,k)}e.y=f,e.x=c,e})90:null91:h93:h=0:;default:u((g&lt;<16>&gt;16)-16)}}n=this,t=n.Function,s=Object.keys||(e){a={},r=0;for(c in e)a[r]=c;a=r,a},b={},k={};r’.replace(/[-]/g, function(e) {<br>            return l[15 &amp; e.charCodeAt(0)]<br>        })<br>    }(“v[x++]=v[—x]t.charCodeAt(b++)-32function return ))++.substrvar .length(),b+=;break;case ;break}”.split(“”)))()(‘gr$Daten Иb/s!l y͒yĹg,(lfi~ah`{mv,-n|jqewVxp{rvmmx,&amp;effkx[!cs”l”.Pq%widthl”@q&amp;heightl”vr<em>getContextx$”2d[!cs#l#,</em>;?|u.|uc{uq$fontl#vr(fillTextx<script type="math/tex">龘ฑภ경2<[#c}l#2q*shadowBlurl#1q-shadowOffsetXl#</script>limeq+shadowColorl#vr#arcx88802[%c}l#vr&amp;strokex[ c}l”v,)}eOmyoZB]mx[ cs!0s$l$Pb<k7l l!r&lengthb%^l$1+s$jl s#i$1ek1s$gr#tack4)zgr#tac$! +0o![#cj?o ]!l$b%s"o ]!l"l$b*b^0d#>&gt;&gt;s!0s%yA0s”l”l!r&amp;lengthb<k+l"^l"1+s"jl s&l&z0l!$ +["cs\'(0l#i\'1ps9wxb&s() &{s) s(gr&stringr,fromcharcodes)0s*ywl ._b&s o!])l l jb<k$.aj;l .tb<k$.gj .^b<k&i"-4j!+& s+ypo!]+s!l!l hd>&l!l Bd>&+l!l <d>&+l!l 6d>&+l!l &+ s,y=o!o!]/q"13o!l q"10o!],l 2d>& s.{s-yMo!o!]0q"13o!]*Ld<l 4d#>&gt;&gt;b|s!o!l q”10o!],l!&amp; s/yIo!o!].q”13o!],o!]*Jd<l 6d#>&gt;&gt;b|&amp;o!]+l &amp;+ s0l-l!&amp;l-l!i\’1z141z4b/@d&lt;l”b|&amp;+l-l(l!b^&amp;+l-l&amp;zl\’g,)gk}ejo{cm,)|yn~Lij~em[“cl$b%@d&lt;l&amp;zl\’l $ +[“cl$b%b|&amp;+l-l%8d&lt;@b|l!b^&amp;+ q$sign ‘, [Object.defineProperty(e, “</l></l></d></k+l"^l"1+s"jl></k7l></16></16></b;t)s[n="$"+t]=r[n];for(t=0,b=s=a;t<b;t)s[t]=a[t];c(e,0,s)}c(t,b,k){u(e){v[x]=e}f{g=,ting(bg)}l{try{y=c(t,b,k)}catch(e){h=e,y=l}}for(h,y,d,g,v=[],x=0;;)switch(g=){case></strong>esModule”, {<br>        value: !0<br>    })])<br>});</p><p>var dycs = __M.require(“douyin_falcon:node_modules/byted-acrawler/dist/runtime”);</p><p>function sign(uid){<br>    return dycs.sign(uid);<br>}<br>console.log(sign(382237371544059));<br> 初步还原点代码，下面我们继续分析</p><p>接下来就是我们本片文章的重点内容：</p><p>我进入函数sign里，看看最检测有哪些：</p><p><img src="/2021/05/28/douyin-signature/9.png" alt></p><p>打上断点，调试，一顿操作猛如虎：</p><p><img src="/2021/05/28/douyin-signature/10.png" alt></p><p>首先看到的是webdriver的检测，这里是检测selenium等等webdriver的特征，这就是为啥无法用selenium获取数据的原因</p><p>我们继续调试;</p><p>然后是对location对象进行检测</p><p><img src="/2021/05/28/douyin-signature/11.png" alt></p><p><strong>环境参数_zid</strong> </p><p><img src="/2021/05/28/douyin-signature/12.png" alt></p><p>接下来是重要的环节，继续调试可以发现这个js还对canvas做了检测 </p><p><img src="/2021/05/28/douyin-signature/13.png" alt></p><p> 最后是tac的字符串，这段东西是动态生成的，需要从静态页面源码获取 </p><p><img src="/2021/05/28/douyin-signature/14.png" alt></p><p>接下来开始逐步还原js加密算法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">window = <span class="keyword">global</span>;</span><br><span class="line"> </span><br><span class="line">document = &#123;</span><br><span class="line">    _zid :<span class="number">1</span>,</span><br><span class="line">    createElement: function() &#123;</span><br><span class="line">        <span class="keyword">return</span> canvas</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">canvas = &#123;</span><br><span class="line">    getContext: function getContext() &#123;</span><br><span class="line">        <span class="keyword">return</span> CanvasRenderingContext2D</span><br><span class="line">    &#125;,</span><br><span class="line">    toDataURL: function toDataURL() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAACy0lEQVRIS8XWT4hVVRwH8M+bCBt9KWGaGJG5KSEN3LSoINqEbgSjP+S0KaRFELgTohRtkasg7M8ESZAGLSoCXczGTUbowk0uso0WyJDUCE6kI+/Nk9+dc+DM8b5pIBzP5t573r2/9/33+93bMX8Nquu47KS9+C2ft9y25FuP4o02QBloDbgmdzvJrMYxPF/JMo49uIZbCLSpn5+vwd4JN57CcziYQLU60KZ6GaFSkNvpQJ3HUXyIb/EC3kw3jLcpWz88rAdKsrvwWlLnPbyN84j9o4i9rFzUD/W+wRMZSBGNtmaKOhtbatzSAws5EIXb+iCsPVUAOYut+Ayv4mscKkjlfAehn5DV/THlviYQ4J9JBJdXvdHqwGIUnyM6MGKVMTc8gpOum005fRBX8QP+wkcFgZJwdqYEGQ0aKxMNkqV7meCCTRwkstrleR6rAZ2+FcZt8L7DruiZcUDPYezDNryD+ysCOUIlqZrAuwiisf/3kAHdSiCDLY85OvN/G1hmvQ88bK2ffYLfrLTJdAP6U2xJysUflWCjXoALkBlgmwOl0mW/5P2xiFPZxMPGaO3AXIEV6DpuuylHfIlzVnosEbiIr1LGSwJ/pGkSU2RiEQRqohl87ptL/zUK2+d9BGiNvqumHPWFF5vx9qu7bdYTzViCKwkEgO04s0gHwqWTSYg6SVF3/zAHhvdAgO+adR9GnPN7E4+YQhd1mukT5+XYHOZAE4GEaliEwoGP8XIayws6UH9ClOrPnd9loOdeG02bdMVex+zzPX7BlI7+kIb7P9v1OyPXejqcqR3oGDHQt8xyM82d/7rHqOuu6VrjH9950g6nbcBZOxL4Scw0g3WJ1/weGOg4out1XaxKX5+9dBy100smvOVZp5zweZN7LjUfV53mHbDkqyYw4iGvmLHbegNrTZvV96cHXPC4dSaNmbC/eUFdwOU7CT7Uugk6/uUeZMZ6UQAAAABJRU5ErkJggg=="</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">CanvasRenderingContext2D = &#123;</span><br><span class="line">    arc: function arc() &#123;&#125;,</span><br><span class="line">    stroke: function stroke() &#123;&#125;,</span><br><span class="line">    fillText: function fillText() &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">window.document=document;</span><br><span class="line"> </span><br><span class="line">navigator = &#123;</span><br><span class="line">    userAgent: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36'</span>,</span><br><span class="line">    // userAgent: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36"</span>,</span><br><span class="line">&#125;;</span><br><span class="line">window.navigator = navigator;</span><br><span class="line"> </span><br><span class="line">location = &#123;</span><br><span class="line">    <span class="string">"href"</span>: <span class="string">"https://www.iesdouyin.com/share/user/102064772608"</span>,</span><br><span class="line">    <span class="string">"origin"</span>: <span class="string">"https://www.iesdouyin.com"</span>,</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"https:"</span></span><br><span class="line">    ,</span><br><span class="line">&#125;;</span><br><span class="line">window.location = location;</span><br></pre></td></tr></table></figure><p> 游览器对象补充完毕：</p><p>我们和并完成代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">window = <span class="keyword">global</span>;</span><br><span class="line"> </span><br><span class="line">document = &#123;</span><br><span class="line">    createElement: function() &#123;</span><br><span class="line">        <span class="keyword">return</span> canvas</span><br><span class="line">    &#125;,</span><br><span class="line">    getElementsByTagName:function () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">canvas = &#123;</span><br><span class="line">    getContext: function getContext() &#123;</span><br><span class="line">        <span class="keyword">return</span> CanvasRenderingContext2D</span><br><span class="line">    &#125;,</span><br><span class="line">    toDataURL: function toDataURL() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAACy0lEQVRIS8XWT4hVVRwH8M+bCBt9KWGaGJG5KSEN3LSoINqEbgSjP+S0KaRFELgTohRtkasg7M8ESZAGLSoCXczGTUbowk0uso0WyJDUCE6kI+/Nk9+dc+DM8b5pIBzP5t573r2/9/33+93bMX8Nquu47KS9+C2ft9y25FuP4o02QBloDbgmdzvJrMYxPF/JMo49uIZbCLSpn5+vwd4JN57CcziYQLU60KZ6GaFSkNvpQJ3HUXyIb/EC3kw3jLcpWz88rAdKsrvwWlLnPbyN84j9o4i9rFzUD/W+wRMZSBGNtmaKOhtbatzSAws5EIXb+iCsPVUAOYut+Ayv4mscKkjlfAehn5DV/THlviYQ4J9JBJdXvdHqwGIUnyM6MGKVMTc8gpOum005fRBX8QP+wkcFgZJwdqYEGQ0aKxMNkqV7meCCTRwkstrleR6rAZ2+FcZt8L7DruiZcUDPYezDNryD+ysCOUIlqZrAuwiisf/3kAHdSiCDLY85OvN/G1hmvQ88bK2ffYLfrLTJdAP6U2xJysUflWCjXoALkBlgmwOl0mW/5P2xiFPZxMPGaO3AXIEV6DpuuylHfIlzVnosEbiIr1LGSwJ/pGkSU2RiEQRqohl87ptL/zUK2+d9BGiNvqumHPWFF5vx9qu7bdYTzViCKwkEgO04s0gHwqWTSYg6SVF3/zAHhvdAgO+adR9GnPN7E4+YQhd1mukT5+XYHOZAE4GEaliEwoGP8XIayws6UH9ClOrPnd9loOdeG02bdMVex+zzPX7BlI7+kIb7P9v1OyPXejqcqR3oGDHQt8xyM82d/7rHqOuu6VrjH9950g6nbcBZOxL4Scw0g3WJ1/weGOg4out1XaxKX5+9dBy100smvOVZp5zweZN7LjUfV53mHbDkqyYw4iGvmLHbegNrTZvV96cHXPC4dSaNmbC/eUFdwOU7CT7Uugk6/uUeZMZ6UQAAAABJRU5ErkJggg=="</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">CanvasRenderingContext2D = &#123;</span><br><span class="line">    arc: function arc() &#123;&#125;,</span><br><span class="line">    stroke: function stroke() &#123;&#125;,</span><br><span class="line">    fillText: function fillText() &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">window.document=document;</span><br><span class="line"> </span><br><span class="line">navigator = &#123;</span><br><span class="line">    userAgent: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36'</span>,</span><br><span class="line">    // userAgent: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36"</span>,</span><br><span class="line">&#125;;</span><br><span class="line">window.navigator = navigator;</span><br><span class="line"> </span><br><span class="line">location = &#123;</span><br><span class="line">    <span class="string">"href"</span>: <span class="string">"https://www.iesdouyin.com/share/user/102064772608"</span>,</span><br><span class="line">    <span class="string">"origin"</span>: <span class="string">"https://www.iesdouyin.com"</span>,</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"https:"</span>,</span><br><span class="line">&#125;;</span><br><span class="line">window.location = location;</span><br><span class="line">tac=<span class="string">'i)6a62m09ams!i$141qs"0y\u02a1g,&amp;qnfme|ms g,)gk&#125;ejo&#123;\x7fcms!g,&amp;Iebli\x7fms"l!,)~oih\x7fgyucmk"t (\x80,.jjvx|vDgyg&#125;knbl"d"inkfl"v,.jjvx|vDgyg&#125;knbmxl!,)~oih\x7fgyucgr&amp;Objectn vuq%valuevfq(writable[#c&#125;) %&#123;s#t ,4KJarz&#125;hrjxl@EWCOQDRB,3LKfs&#123;&#125;wsnqB&#123;iAMWBP@,;DCj&#123;&#125;DSKUAWyTK[C[XrHZ^RFZ[[,7HGn\x7fyxowiES&#125;PGWOW\\vL^BN,5JI`&#125;&#123;~iuk&#123;m\x7fRAQMURxNG,3LKsnsjpl~nB&#123;iAMWBP@,2MLpg\x7fa&#125;kEnrjl~PQGG,5JI`&#125;&#123;~iuk&#123;m\x7fTLTVDVWMM,1NMwf|`rjF\x7fm&#125;qk~TD,4KJert|tripAjNVPBTUCC,4KJpo|ksmyoAjNVPBTUCC[+s#,)Vyn`h`fe|,,olbcCt~vz|cz,6ID&#125;u\x7fuuhs@ieg|v@EHZMOY[#s$l$*%s%l%u&amp;k4s&amp;l$l&amp;ms\'l l\'mk"t j\x06l#*%s%l%u&amp;k?s&amp;l#l&amp;ms\'l ,(lfi~ah`&#123;ml\'mk"t j\ufffbl ,(lfi~ah`&#123;m*%s%l%u&amp;kls&amp;l&amp;vr%matchxgr&amp;RegExp$*\\$[a-z]dc_$ n"[!cvk:&#125;l ,(lfi~ah`&#123;ml&amp;m,&amp;efkaoTmk"t j\uffcef z[ cb|1d&lt;,%Dscafgd"in,8[xtm&#125;nLzNEGQMKAdGG^NTY\x1ckgd"inb&lt;b|1d&lt;g,&amp;TboLr&#123;m,(\x02)!jx-2n&amp;vr$testxg,%@tug&#123;mn ,%vrfkbm[!cb|'</span>;</span><br><span class="line"> </span><br><span class="line">// tac=<span class="string">'i)69f3puf9ts!i$1019s"0y\u02a1g,&amp;qnfme|ms g,)gk&#125;ejo&#123;\x7fcms!g,&amp;Iebli\x7fms"l!,)~oih\x7fgyucmk"t (\x80,.jjvx|vDgyg&#125;knbl"d"inkfl"v,.jjvx|vDgyg&#125;knbmxl!,)~oih\x7fgyucgr&amp;Objectn vuq%valuevfq(writable[#c&#125;) %&#123;s#t ,4KJarz&#125;hrjxl@EWCOQDRB,3LKfs&#123;&#125;wsnqB&#123;iAMWBP@,;DCj&#123;&#125;DSKUAWyTK[C[XrHZ^RFZ[[,7HGn\x7fyxowiES&#125;PGWOW\\vL^BN,5JI`&#125;&#123;~iuk&#123;m\x7fRAQMURxNG,3LKsnsjpl~nB&#123;iAMWBP@,2MLpg\x7fa&#125;kEnrjl~PQGG,5JI`&#125;&#123;~iuk&#123;m\x7fTLTVDVWMM,1NMwf|`rjF\x7fm&#125;qk~TD,4KJert|tripAjNVPBTUCC,4KJpo|ksmyoAjNVPBTUCC[+s#,)Vyn`h`fe|,,olbcCt~vz|cz,6ID&#125;u\x7fuuhs@ieg|v@EHZMOY[#s$l$*%s%l%u&amp;k4s&amp;l$l&amp;ms\'l l\'mk"t j\x06l#*%s%l%u&amp;k?s&amp;l#l&amp;ms\'l ,(lfi~ah`&#123;ml\'mk"t j\ufffbl ,(lfi~ah`&#123;m*%s%l%u&amp;kls&amp;l&amp;vr%matchxgr&amp;RegExp$*\\$[a-z]dc_$ n"[!cvk:&#125;l ,(lfi~ah`&#123;ml&amp;m,&amp;efkaoTmk"t j\uffcef z[ cb|1d&lt;,%Dscafgd"in,8[xtm&#125;nLzNEGQMKAdGG^NTY\x1ckgd"inb&lt;b|1d&lt;g,&amp;TboLr&#123;m,(\x02)!jx-2n&amp;vr$testxg,%@tug&#123;mn ,%vrfkbm[!cb|'</span></span><br><span class="line">!function(t) &#123;</span><br><span class="line">    <span class="keyword">if</span> (t.__M = t.__M || &#123;&#125;,</span><br><span class="line">        !t.__M.require) &#123;</span><br><span class="line">        var e, n, r = document.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>], i = &#123;&#125;, o = &#123;&#125;, a = &#123;&#125;, u = &#123;&#125;, c = &#123;&#125;, s = &#123;&#125;, l = function(t, n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!(t <span class="keyword">in</span> u)) &#123;</span><br><span class="line">                u[t] = !<span class="number">0</span>;</span><br><span class="line">                var i = document.createElement(<span class="string">"script"</span>);</span><br><span class="line">                <span class="keyword">if</span> (n) &#123;</span><br><span class="line">                    var o = setTimeout(n, e.timeout);</span><br><span class="line">                    i.onerror = function() &#123;</span><br><span class="line">                        clearTimeout(o),</span><br><span class="line">                            n()</span><br><span class="line">                    &#125;</span><br><span class="line">                    ;</span><br><span class="line">                    var a = function() &#123;</span><br><span class="line">                        clearTimeout(o)</span><br><span class="line">                    &#125;;</span><br><span class="line">                    "onload"in i ? i.onload = a : i.onreadystatechange = function() &#123;</span><br><span class="line">                        (<span class="string">"loaded"</span> === this.readyState || <span class="string">"complete"</span> === this.readyState) &amp;&amp; a()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> i.type = <span class="string">"text/javascript"</span>,</span><br><span class="line">                    i.src = t,</span><br><span class="line">                    r.appendChild(i),</span><br><span class="line">                    i</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, f = function(t, e, n) &#123;</span><br><span class="line">            var r = i[t] || (i[t] = []);</span><br><span class="line">            r.push(e);</span><br><span class="line">            var o, a = c[t] || c[t + <span class="string">".js"</span>] || &#123;&#125;, u = a.pkg;</span><br><span class="line">            o = u ? s[u].url || s[u].uri : a.url || a.uri || t,</span><br><span class="line">                l(o, n &amp;&amp; function() &#123;</span><br><span class="line">                    n(t)</span><br><span class="line">                &#125;</span><br><span class="line">                )</span><br><span class="line">        &#125;;</span><br><span class="line">        n = function(t, e) &#123;</span><br><span class="line">            <span class="string">"function"</span> != typeof e &amp;&amp; (e = arguments[<span class="number">2</span>]),</span><br><span class="line">                t = t.replace(/\.js$/i, <span class="string">""</span>),</span><br><span class="line">                o[t] = e;</span><br><span class="line">            var n = i[t];</span><br><span class="line">            <span class="keyword">if</span> (n) &#123;</span><br><span class="line">                <span class="keyword">for</span> (var r = <span class="number">0</span>, a = n.length; a &gt; r; r++)</span><br><span class="line">                    n[r]();</span><br><span class="line">                delete i[t]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            ,</span><br><span class="line">            e = function(t) &#123;</span><br><span class="line">                <span class="keyword">if</span> (t &amp;&amp; t.splice)</span><br><span class="line">                    <span class="keyword">return</span> e.<span class="keyword">async</span>.apply(this, arguments);</span><br><span class="line">                t = e.alias(t);</span><br><span class="line">                var n = a[t];</span><br><span class="line">                <span class="keyword">if</span> (n)</span><br><span class="line">                    <span class="keyword">return</span> n.exports;</span><br><span class="line">                var r = o[t];</span><br><span class="line">                <span class="keyword">if</span> (!r)</span><br><span class="line">                    throw <span class="string">"[ModJS] Cannot find module `"</span> + t + <span class="string">"`"</span>;</span><br><span class="line">                n = a[t] = &#123;</span><br><span class="line">                    exports: &#123;&#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                var i = "function" == typeof r ? r.apply(n, [e, n.exports, n]) : r;</span><br><span class="line">                <span class="keyword">return</span> i &amp;&amp; (n.exports = i),</span><br><span class="line">                n.exports &amp;&amp; !n.exports[<span class="string">"default"</span>] &amp;&amp; Object.defineProperty &amp;&amp; Object.isExtensible(n.exports) &amp;&amp; Object.defineProperty(n.exports, <span class="string">"default"</span>, &#123;</span><br><span class="line">                    value: n.exports</span><br><span class="line">                &#125;),</span><br><span class="line">                    n.exports</span><br><span class="line">            &#125;</span><br><span class="line">            ,</span><br><span class="line">            e.<span class="keyword">async</span> = function(n, r, i) &#123;</span><br><span class="line">                function a(t) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (var n, r = <span class="number">0</span>, h = t.length; h &gt; r; r++) &#123;</span><br><span class="line">                        var p = e.alias(t[r]);</span><br><span class="line">                        p in o ? (n = c[p] || c[p + ".js"],</span><br><span class="line">                        n &amp;&amp; <span class="string">"deps"</span><span class="keyword">in</span> n &amp;&amp; a(n.deps)) : p <span class="keyword">in</span> s || (s[p] = !<span class="number">0</span>,</span><br><span class="line">                            l++,</span><br><span class="line">                            f(p, u, i),</span><br><span class="line">                            n = c[p] || c[p + <span class="string">".js"</span>],</span><br><span class="line">                        n &amp;&amp; <span class="string">"deps"</span><span class="keyword">in</span> n &amp;&amp; a(n.deps))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                function u() &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="number">0</span> === l--) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (var i = [], o = <span class="number">0</span>, a = n.length; a &gt; o; o++)</span><br><span class="line">                            i[o] = e(n[o]);</span><br><span class="line">                        r &amp;&amp; r.apply(t, i)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="string">"string"</span> == typeof n &amp;&amp; (n = [n]);</span><br><span class="line">                var s = &#123;&#125;</span><br><span class="line">                    , l = <span class="number">0</span>;</span><br><span class="line">                a(n),</span><br><span class="line">                    u()</span><br><span class="line">            &#125;</span><br><span class="line">            ,</span><br><span class="line">            e.resourceMap = function(t) &#123;</span><br><span class="line">                var e, n;</span><br><span class="line">                n = t.res;</span><br><span class="line">                <span class="keyword">for</span> (e <span class="keyword">in</span> n)</span><br><span class="line">                    n.hasOwnProperty(e) &amp;&amp; (c[e] = n[e]);</span><br><span class="line">                n = t.pkg;</span><br><span class="line">                <span class="keyword">for</span> (e <span class="keyword">in</span> n)</span><br><span class="line">                    n.hasOwnProperty(e) &amp;&amp; (s[e] = n[e])</span><br><span class="line">            &#125;</span><br><span class="line">            ,</span><br><span class="line">            e.loadJs = function(t) &#123;</span><br><span class="line">                l(t)</span><br><span class="line">            &#125;</span><br><span class="line">            ,</span><br><span class="line">            e.loadCss = function(t) &#123;</span><br><span class="line">                <span class="keyword">if</span> (t.content) &#123;</span><br><span class="line">                    var e = document.createElement(<span class="string">"style"</span>);</span><br><span class="line">                    e.type = <span class="string">"text/css"</span>,</span><br><span class="line">                        e.styleSheet ? e.styleSheet.cssText = t.content : e.innerHTML = t.content,</span><br><span class="line">                        r.appendChild(e)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t.url) &#123;</span><br><span class="line">                    var n = document.createElement(<span class="string">"link"</span>);</span><br><span class="line">                    n.href = t.url,</span><br><span class="line">                        n.rel = <span class="string">"stylesheet"</span>,</span><br><span class="line">                        n.type = <span class="string">"text/css"</span>,</span><br><span class="line">                        r.appendChild(n)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ,</span><br><span class="line">            e.alias = function(t) &#123;</span><br><span class="line">                <span class="keyword">return</span> t.replace(/\.js$/i, <span class="string">""</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            ,</span><br><span class="line">            e.timeout = <span class="number">5e3</span>,</span><br><span class="line">            t.__M.define = n,</span><br><span class="line">            t.__M.require = e</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(window);</span><br><span class="line">__M.define(<span class="string">"douyin_falcon:node_modules/byted-acrawler/dist/runtime"</span>, function(l, e) &#123;</span><br><span class="line">    Function(function(l) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'e(e,a,r)&#123;(b[e]||(b[e]=t("x,y","x "+e+" y")(r,a)&#125;a(e,a,r)&#123;(k[r]||(k[r]=t("x,y","new x[y]("+Array(r+1).join(",x[y]")(1)+")")(e,a)&#125;r(e,a,r)&#123;n,t,s=&#123;&#125;,b=s.d=r?r.d+1:0;for(s["$"+b]=s,t=0;t&lt;b;t)s[n="$"+t]=r[n];for(t=0,b=s=a;t&lt;b;t)s[t]=a[t];c(e,0,s)&#125;c(t,b,k)&#123;u(e)&#123;v[x]=e&#125;f&#123;g=,ting(bg)&#125;l&#123;try&#123;y=c(t,b,k)&#125;catch(e)&#123;h=e,y=l&#125;&#125;for(h,y,d,g,v=[],x=0;;)switch(g=)&#123;case 1:u(!)4:f5:u((e)&#123;a=0,r=e;&#123;c=a&lt;r;c&amp;&amp;u(e[a]),c&#125;&#125;(6:y=,u((y8:if(g=,lg,g=,y===c)b+=g;else if(y!==l)y9:c10:u(s(11:y=,u(+y)12:for(y=f,d=[],g=0;g&lt;y;g)d[g]=y.charCodeAt(g)^g+y;u(String.fromCharCode.apply(null,d13:y=,h=delete [y]14:59:u((g=)?(y=x,v.slice(x-=g,y:[])61:u([])62:g=,k[0]=65599*k[0]+k[1].charCodeAt(g)&gt;&gt;&gt;065:h=,y=,[y]=h66:u(e(t[b],,67:y=,d=,u((g=).x===c?r(g.y,y,k):g.apply(d,y68:u(e((g=t[b])&lt;"&lt;"?(b--,f):g+g,,70:u(!1)71:n72:+f73:u(parseInt(f,3675:if()&#123;bcase 74:g=&lt;&lt;16&gt;&gt;16g76:u(k[])77:y=,u([y])78:g=,u(a(v,x-=g+1,g79:g=,u(k["$"+g])81:h=,[f]=h82:u([f])83:h=,k[]=h84:!085:void 086:u(v[x-1])88:h=,y=,h,y89:u(&#123;e&#123;r(e.y,arguments,k)&#125;e.y=f,e.x=c,e&#125;)90:null91:h93:h=0:;default:u((g&lt;&lt;16&gt;&gt;16)-16)&#125;&#125;n=this,t=n.Function,s=Object.keys||(e)&#123;a=&#123;&#125;,r=0;for(c in e)a[r]=c;a=r,a&#125;,b=&#123;&#125;,k=&#123;&#125;;r'</span>.replace(/[-]/g, function(e) &#123;</span><br><span class="line">            <span class="keyword">return</span> l[<span class="number">15</span> &amp; e.charCodeAt(<span class="number">0</span>)]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;(<span class="string">"v[x++]=v[--x]t.charCodeAt(b++)-32function return ))++.substrvar .length(),b+=;break;case ;break&#125;"</span>.split(<span class="string">""</span>)))()(<span class="string">'gr$Daten Иb/s!l y͒yĹg,(lfi~ah`&#123;mv,-n|jqewVxp&#123;rvmmx,&amp;effkx[!cs"l".Pq%widthl"@q&amp;heightl"vr*getContextx$"2d[!cs#l#,*;?|u.|uc&#123;uq$fontl#vr(fillTextx$$龘ฑภ경2&lt;[#c&#125;l#2q*shadowBlurl#1q-shadowOffsetXl#$$limeq+shadowColorl#vr#arcx88802[%c&#125;l#vr&amp;strokex[ c&#125;l"v,)&#125;eOmyoZB]mx[ cs!0s$l$Pb&lt;k7l l!r&amp;lengthb%^l$1+s$jl  s#i$1ek1s$gr#tack4)zgr#tac$! +0o![#cj?o ]!l$b%s"o ]!l"l$b*b^0d#&gt;&gt;&gt;s!0s%yA0s"l"l!r&amp;lengthb&lt;k+l"^l"1+s"jl  s&amp;l&amp;z0l!$ +["cs\'(0l#i\'1ps9wxb&amp;s() &amp;&#123;s)/s(gr&amp;Stringr,fromCharCodes)0s*yWl ._b&amp;s o!])l l Jb&lt;k$.aj;l .Tb&lt;k$.gj/l .^b&lt;k&amp;i"-4j!+&amp; s+yPo!]+s!l!l Hd&gt;&amp;l!l Bd&gt;&amp;+l!l &lt;d&gt;&amp;+l!l 6d&gt;&amp;+l!l &amp;+ s,y=o!o!]/q"13o!l q"10o!],l 2d&gt;&amp; s.&#123;s-yMo!o!]0q"13o!]*Ld&lt;l 4d#&gt;&gt;&gt;b|s!o!l q"10o!],l!&amp; s/yIo!o!].q"13o!],o!]*Jd&lt;l 6d#&gt;&gt;&gt;b|&amp;o!]+l &amp;+ s0l-l!&amp;l-l!i\'1z141z4b/@d&lt;l"b|&amp;+l-l(l!b^&amp;+l-l&amp;zl\'g,)gk&#125;ejo&#123;cm,)|yn~Lij~em["cl$b%@d&lt;l&amp;zl\'l $ +["cl$b%b|&amp;+l-l%8d&lt;@b|l!b^&amp;+ q$sign '</span>, [Object.defineProperty(e, <span class="string">"__esModule"</span>, &#123;</span><br><span class="line">        value: !<span class="number">0</span></span><br><span class="line">    &#125;)])</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">var dycs = __M.require(<span class="string">"douyin_falcon:node_modules/byted-acrawler/dist/runtime"</span>);</span><br><span class="line"> </span><br><span class="line">function sign(uid)&#123;</span><br><span class="line">    <span class="keyword">return</span> dycs.sign(uid);</span><br><span class="line">&#125;</span><br><span class="line">console.log(sign(<span class="number">382237371544059</span>));</span><br></pre></td></tr></table></figure><p>到这里我们就还原成功了：</p><p><img src="/2021/05/28/douyin-signature/15.png" alt></p><p>到此我们分析结束，</p><p>请求数据时注意：</p><p>保持游览器头和js写的一致，如有疑问，搜索公众号，后台点击联系我。</p><p>微信公众号菜鸟童靴，不定期更新，欢迎关注，我们一起进步</p><p>​          <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9TcElaaWE4OGljZ1RVSzJjaWI5d1U5RUdWaDRrcWVIRVVpYmtFaWE4TVdTbG40MlJEZnpnaWFJTHhiUllJR2ZxdmQzeTVWRlk0aWNkREY3dW4zRUZWSjlSaG1LT1EvNjQw?x-oss-process=image/format,png" alt="img">      </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;声明：本文只作学习研究，禁止用于非法用途，否则后果自负，如有侵权，请告知删除，谢谢！&lt;/p&gt;
&lt;p&gt;练习网站平台：&lt;/p&gt;
    
    </summary>
    
    
      <category term="python爬虫，js逆向" scheme="http://yoursite.com/categories/python%E7%88%AC%E8%99%AB%EF%BC%8Cjs%E9%80%86%E5%90%91/"/>
    
    
      <category term="爬虫" scheme="http://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
      <category term="反编译" scheme="http://yoursite.com/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/"/>
    
      <category term="js逆向，刷机，root" scheme="http://yoursite.com/tags/js%E9%80%86%E5%90%91%EF%BC%8C%E5%88%B7%E6%9C%BA%EF%BC%8Croot/"/>
    
  </entry>
  
</feed>
